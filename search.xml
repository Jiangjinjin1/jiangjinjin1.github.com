<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[react-nativeéšç¬”]]></title>
    <url>%2F2019%2F02%2F14%2Freact-native%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[å‰è¨€åšäº†react-nativeä¹Ÿæœ‰ä¸¤å¹´äº†ï¼Œå¹³æ—¶é‡åˆ°çš„æ³¨æ„ç‚¹å’Œå‘ï¼Œåªæ˜¯è§£å†³äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è®°å½•ï¼Œç°åœ¨å›æƒ³æˆ‘éƒ½ä¸è®°å¾—æˆ‘é‡åˆ°å“ªäº›å‘äº†ï¼Œä¸€è„¸æ‡µé€¼å½“ä¸­23333.ã€‚ã€‚ï¼Œè¿˜æ˜¯åŠ¨åŠ¨æ‰‹è®°å½•ä¸‹ï¼Œå…å¾—æ˜å¹´ä¹Ÿæ‡µé€¼ğŸ˜† æ³¨æ„ç‚¹ã€å‘ç‚¹ã€ä¸å¸¸ç”¨ä¸æ˜“è®°çš„ 1ã€flexå’ŒflexGrowçš„åŒºåˆ«ï¼šæ­£å¸¸æƒ…å†µä¸‹ï¼Œflex:1ï¼Œå’ŒflexGrow: 1,éƒ½ä¼šåœ¨çˆ¶å…ƒç´ ä¸‹å æ»¡å„è‡ªçš„ç©ºé—´ï¼Œflex: 1æ—¶ï¼Œä¸€ä¸ªviewæƒ³è®¾ç½®heightï¼ŒåŒæ—¶é«˜äºçˆ¶å…ƒç´ çš„ç©ºé—´ï¼Œè¿™æ ·é«˜åº¦ä»ç„¶æ˜¯å æ»¡çˆ¶å…ƒç´ å¹¶ä¸ä¼šæ’‘å¼€ã€‚flexGrow: 1æ—¶ï¼Œè®¾ç½®äº†heightï¼Œä¸ä¼šå—çˆ¶å…ƒç´ ç©ºé—´é™åˆ¶ã€‚è§£é‡Šï¼šflexåªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸”å€¼ä¸ºæ•´æ•°æ—¶ï¼Œç­‰ä»·äº flexï¼šX, 1, 0 ï¼ï¼è¿™æ‰æ˜¯æœ€ç»ˆç­”æ¡ˆï¼Œæ˜¯æ ¹æœ¬åŸå› ã€‚flexè¿™ä¸ªå±æ€§æ˜¯flexGrowã€flexShrinkå’ŒflexBasisä¸‰ä¸ªå±æ€§çš„ç¼©å†™ã€‚è¯¦ç»†å¸ƒå±€ç‰‡å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« [http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html]]]></content>
      <categories>
        <category>react-native</category>
      </categories>
      <tags>
        <tag>react-native</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSçŸ¥è¯†é¢è¯•é¢˜]]></title>
    <url>%2F2019%2F01%2F07%2FJS%E7%9F%A5%E8%AF%86%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä¸€ã€åŸºç¡€javascriptç¯‡1ã€ç±»çš„åˆ›å»ºå’Œç»§æ‰¿ï¼ˆ1ï¼‰ç±»çš„åˆ›å»ºï¼ˆes5ï¼‰ï¼šnewä¸€ä¸ªfunctionï¼Œåœ¨è¿™ä¸ªfunctionçš„prototypeé‡Œé¢å¢åŠ å±æ€§å’Œæ–¹æ³•ã€‚ ä¸‹é¢æ¥åˆ›å»ºä¸€ä¸ªAnimalç±»ï¼š 12345678910111213// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©ç±»function Animal (name) &#123; // å±æ€§ this.name = name || 'Animal'; // å®ä¾‹æ–¹æ³• this.sleep = function()&#123; console.log(this.name + 'æ­£åœ¨ç¡è§‰ï¼'); &#125;&#125;// åŸå‹æ–¹æ³•Animal.prototype.eat = function(food) &#123; console.log(this.name + 'æ­£åœ¨åƒï¼š' + food);&#125;; è¿™æ ·å°±ç”Ÿæˆäº†ä¸€ä¸ªAnimalç±»ï¼Œå®åŠ›åŒ–ç”Ÿæˆå¯¹è±¡åï¼Œæœ‰æ–¹æ³•å’Œå±æ€§ã€‚ ï¼ˆ2ï¼‰ç±»çš„ç»§æ‰¿â€”â€”åŸå‹é“¾ç»§æ‰¿ 1234567891011--åŸå‹é“¾ç»§æ‰¿function Cat()&#123; &#125;Cat.prototype = new Animal();Cat.prototype.name = 'cat';//&amp;emsp;Test Codevar cat = new Cat();console.log(cat.name);console.log(cat.eat('fish'));console.log(cat.sleep());console.log(cat instanceof Animal); //true console.log(cat instanceof Cat); //true ä»‹ç»ï¼šåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°newäº†ä¸€ä¸ªç©ºå¯¹è±¡,è¿™ä¸ªç©ºå¯¹è±¡æŒ‡å‘Animalå¹¶ä¸”Cat.prototypeæŒ‡å‘äº†è¿™ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ç§å°±æ˜¯åŸºäºåŸå‹é“¾çš„ç»§æ‰¿ã€‚ ç‰¹ç‚¹ï¼šåŸºäºåŸå‹é“¾ï¼Œæ—¢æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯å­ç±»çš„å®ä¾‹ ç¼ºç‚¹ï¼šæ— æ³•å®ç°å¤šç»§æ‰¿ ï¼ˆ3ï¼‰æ„é€ ç»§æ‰¿ï¼šä½¿ç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å¢å¼ºå­ç±»å®ä¾‹ï¼Œç­‰äºæ˜¯å¤åˆ¶çˆ¶ç±»çš„å®ä¾‹å±æ€§ç»™å­ç±»ï¼ˆæ²¡ç”¨åˆ°åŸå‹ï¼‰ 12345678910function Cat(name)&#123; Animal.call(this); this.name = name || 'Tom';&#125;// Test Codevar cat = new Cat();console.log(cat.name);console.log(cat.sleep());console.log(cat instanceof Animal); // falseconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼šå¯ä»¥å®ç°å¤šç»§æ‰¿ ç¼ºç‚¹ï¼šåªèƒ½ç»§æ‰¿çˆ¶ç±»å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚ ï¼ˆ4ï¼‰å®ä¾‹ç»§æ‰¿å’Œæ‹·è´ç»§æ‰¿ å®ä¾‹ç»§æ‰¿ï¼šä¸ºçˆ¶ç±»å®ä¾‹æ·»åŠ æ–°ç‰¹æ€§ï¼Œä½œä¸ºå­ç±»å®ä¾‹è¿”å› æ‹·è´ç»§æ‰¿ï¼šæ‹·è´çˆ¶ç±»å…ƒç´ ä¸Šçš„å±æ€§å’Œæ–¹æ³• ä¸Šè¿°ä¸¤ä¸ªå®ç”¨æ€§ä¸å¼ºï¼Œä¸ä¸€ä¸€ä¸¾ä¾‹ã€‚ ï¼ˆ5ï¼‰ç»„åˆç»§æ‰¿ï¼šç›¸å½“äºæ„é€ ç»§æ‰¿å’ŒåŸå‹é“¾ç»§æ‰¿çš„ç»„åˆä½“ã€‚é€šè¿‡è°ƒç”¨çˆ¶ç±»æ„é€ ï¼Œç»§æ‰¿çˆ¶ç±»çš„å±æ€§å¹¶ä¿ç•™ä¼ å‚çš„ä¼˜ç‚¹ï¼Œç„¶åé€šè¿‡å°†çˆ¶ç±»å®ä¾‹ä½œä¸ºå­ç±»åŸå‹ï¼Œå®ç°å‡½æ•°å¤ç”¨ 123456789101112function Cat(name)&#123; Animal.call(this); this.name = name || 'Tom';&#125;Cat.prototype = new Animal();Cat.prototype.constructor = Cat;// Test Codevar cat = new Cat();console.log(cat.name);console.log(cat.sleep());console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); // true ç‰¹ç‚¹ï¼šå¯ä»¥ç»§æ‰¿å®ä¾‹å±æ€§/æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³• ç¼ºç‚¹ï¼šè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹ ï¼ˆ6ï¼‰å¯„ç”Ÿç»„åˆç»§æ‰¿ï¼šé€šè¿‡å¯„ç”Ÿæ–¹å¼ï¼Œç æ‰çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œè¿™æ ·ï¼Œåœ¨è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåˆå§‹åŒ–ä¸¤æ¬¡å®ä¾‹æ–¹æ³•/å±æ€§ 1234567891011121314151617function Cat(name)&#123; Animal.call(this); this.name = name || 'Tom';&#125;(function()&#123; // åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®ä¾‹æ–¹æ³•çš„ç±» var Super = function()&#123;&#125;; Super.prototype = Animal.prototype; //å°†å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹ Cat.prototype = new Super();&#125;)();// Test Codevar cat = new Cat();console.log(cat.name);console.log(cat.sleep());console.log(cat instanceof Animal); // trueconsole.log(cat instanceof Cat); //true è¾ƒä¸ºæ¨è 2ã€è¯´è¯´å‰ç«¯ä¸­çš„äº‹ä»¶æµ&emsp;&emsp;HTMLä¸­ä¸javascriptäº¤äº’æ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨æ¥å®ç°çš„ï¼Œä¾‹å¦‚é¼ æ ‡ç‚¹å‡»äº‹ä»¶onclickã€é¡µé¢çš„æ»šåŠ¨äº‹ä»¶onscrollç­‰ç­‰ï¼Œå¯ä»¥å‘æ–‡æ¡£æˆ–è€…æ–‡æ¡£ä¸­çš„å…ƒç´ æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ¥é¢„è®¢äº‹ä»¶ã€‚æƒ³è¦çŸ¥é“è¿™äº›äº‹ä»¶æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œè°ƒç”¨çš„ï¼Œå°±éœ€è¦äº†è§£ä¸€ä¸‹â€œäº‹ä»¶æµâ€çš„æ¦‚å¿µã€‚&emsp;&emsp;ä»€ä¹ˆæ˜¯äº‹ä»¶æµï¼šäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåº,DOM2çº§äº‹ä»¶æµåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªé˜¶æ®µã€‚ äº‹ä»¶æ•è·é˜¶æ®µ å¤„äºç›®æ ‡é˜¶æ®µ äº‹ä»¶å†’æ³¡é˜¶æ®µ &emsp;&emsp;addEventListenerï¼šaddEventListener æ˜¯DOM2 çº§äº‹ä»¶æ–°å¢çš„æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºçš„æ“ä½œï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶3ä¸ªå‚æ•°ï¼šè¦å¤„ç†çš„äº‹ä»¶åã€ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•°å’Œä¸€ä¸ªå¸ƒå°”å€¼ã€‚æœ€åè¿™ä¸ªå¸ƒå°”å€¼å‚æ•°å¦‚æœæ˜¯trueï¼Œè¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼›å¦‚æœæ˜¯falseï¼Œè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚ IEåªæ”¯æŒäº‹ä»¶å†’æ³¡ã€‚ 3ã€å¦‚ä½•è®©äº‹ä»¶å…ˆå†’æ³¡åæ•è·&emsp;&emsp;åœ¨DOMæ ‡å‡†äº‹ä»¶æ¨¡å‹ä¸­ï¼Œæ˜¯å…ˆæ•è·åå†’æ³¡ã€‚ä½†æ˜¯å¦‚æœè¦å®ç°å…ˆå†’æ³¡åæ•è·çš„æ•ˆæœï¼Œå¯¹äºåŒä¸€ä¸ªäº‹ä»¶ï¼Œç›‘å¬æ•è·å’Œå†’æ³¡ï¼Œåˆ†åˆ«å¯¹åº”ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œç›‘å¬åˆ°æ•è·äº‹ä»¶ï¼Œå…ˆæš‚ç¼“æ‰§è¡Œï¼Œç›´åˆ°å†’æ³¡äº‹ä»¶è¢«æ•è·åå†æ‰§è¡Œæ•è·ä¹‹é—´ã€‚ 4ã€calleeå’Œcallerçš„ä½œç”¨ä¸åŒºåˆ«é€’å½’æˆ‘ä»¬å¯èƒ½ç”¨åˆ°ä¸€äº›å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œå³é€’å½’ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„ã€‚ 123function factorial(x) &#123; return x&lt;=1 ? 1 : x*factorial(x-1);&#125; è¿è¡Œåå‘ç°å®ƒå¾ˆå¥½çš„å®Œæˆäº†æˆ‘ä»¬çš„è¦æ±‚ã€‚å¯æ˜¯è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸‡ä¸€å“ªå¤©æœ‰äººé‡æ„è¿™ä¸ªå‡½æ•°æ”¹äº†å‡½æ•°åå‘¢ï¼Ÿä¿®æ”¹ä¸æ–¹ä¾¿ç”šè‡³æ¼æ”¹ã€‚ arguments.callee ä½¿ç”¨callee é¿å…hard code å‡½æ•°åã€‚ 123function factorial(x) &#123; return x&lt;=1 ? 1 : x * arguments.callee(x-1);&#125; calleeæ˜¯argumentså¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘ arguments å¯¹è±¡çš„å‡½æ•°ï¼Œå³å½“å‰å‡½æ•°ã€‚åœ¨ä¾‹å­ä¸­æ˜¯XXã€‚ caller å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ã€‚æ¯”å¦‚ A() è°ƒç”¨ B()ï¼Œ åˆ™åœ¨B()ä¸­ B.caller æŒ‡å‘A()ã€‚ 1234567function B()&#123; console.log(B.caller);&#125; (function A()&#123; B()&#125;)() æ˜¾ç„¶ï¼Œåªæœ‰å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¯¥å±æ€§æ‰ä¼šæœ‰å€¼ã€‚ä¸è¿‡å½“å‡½æ•°è¢«å…¨å±€è°ƒç”¨æ—¶ï¼Œè¯¥å±æ€§ä¸ºnullã€‚ calleeå’Œcallerç»“åˆ æˆ‘ä»¬åˆšæ‰åœ¨å‡½æ•°B() ä¸­ä½¿ç”¨äº† B.caller ã€‚è·Ÿä¸Šé¢é€’å½’ä¸€æ ·ï¼Œå°†æ¥å¦‚æœæœ‰äººé‡æ„æ”¹äº†å‡½æ•°åå‘¢ï¼Ÿ ä¸‹é¢ç”¨åˆšæ‰è¯´çš„ arguments.callee æ›¿æ¢ã€‚ 123function B()&#123; console.log(arguments.callee.caller);&#125; åˆ°è¿™æ˜¯ä¸æ˜¯å¥½å¤šäº†ã€‚å†æ‰§è¡ŒA() ï¼Œå‘ç°è·Ÿåˆšæ‰çš„è¾“å‡ºä¸€æ ·ã€‚ 5ã€ç»™historyçš„replaceStateå’ŒpushStateè¡Œä¸ºæ·»åŠ ç›‘å¬äº‹ä»¶å…·ä½“åšæ³•ä¸ºï¼š 123456789101112var _wr = function(type) &#123; var orig = history[type]; return function() &#123; var rv = orig.apply(this, arguments); var e = new Event(type); e.arguments = arguments; window.dispatchEvent(e); return rv; &#125;;&#125;; history.pushState = _wr('pushState'); history.replaceState = _wr('replaceState'); è¿™æ ·å°±åˆ›å»ºäº†2ä¸ªå…¨æ–°çš„äº‹ä»¶ï¼Œäº‹ä»¶åä¸ºpushStateå’ŒreplaceStateï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å…¨å±€ç›‘å¬ï¼š 123456window.addEventListener('replaceState', function(e) &#123; console.log('THEY DID IT AGAIN! replaceState 111111');&#125;);window.addEventListener('pushState', function(e) &#123; console.log('THEY DID IT AGAIN! pushState 2222222');&#125;); è¿™æ ·å°±å¯ä»¥ç›‘å¬åˆ°pushStateå’ŒreplaceStateè¡Œä¸ºã€‚ äºŒã€è¿›é˜¶javascriptç¯‡1ã€è‡ªå·±å®ç°ä¸€ä¸ªbindå‡½æ•°åŸç†ï¼šé€šè¿‡applyæˆ–è€…callæ–¹æ³•æ¥å®ç°ã€‚ (1)åˆå§‹ç‰ˆæœ¬ 123456789Function.prototype.bind = function (obj, arg) &#123; var context = this; var tmpArg = Array.prototype.slice.call(arguments, 1); return function(newArg) &#123; var newArgs = tmpArg.concat(Array.prototype.slice.call(newArg)) return context.apply(obj, newArgs) &#125;&#125; (2) è€ƒè™‘åˆ°åŸå‹é“¾ä¸ºä»€ä¹ˆè¦è€ƒè™‘ï¼Ÿå› ä¸ºåœ¨new ä¸€ä¸ªbindè¿‡ç”Ÿæˆçš„æ–°å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»çš„æ¡ä»¶æ˜¯è¦ç»§æ‰¿åŸå‡½æ•°çš„åŸå‹ 1234567891011121314151617Function.prototype.bind = function (obj, arg) &#123; var context = this; var tmpArg = Array.prototype.slice.call(arguments, 1); var newBind = function(newArg) &#123; var newArgs = tmpArg.concat(Array.prototype.slice.call(newArg)) return context.apply(obj, newArgs) &#125; var F = function() &#123;&#125; F.prototype = context.prototype; //è¿™é‡Œéœ€è¦ä¸€ä¸ªå¯„ç”Ÿç»„åˆç»§æ‰¿ newBind.prototype = new F(); return newBind&#125; 2ã€Macrotasks å’Œ MicrotasksMacrotask å’Œ microtask éƒ½æ˜¯å±äºä¸Šè¿°çš„å¼‚æ­¥ä»»åŠ¡ä¸­çš„ä¸€ç§ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä»–ä»¬åˆ†åˆ«æ˜¯å“ªäº› API ï¼š macrotasks: setTimeout, setInterval, setImmediate, I/O, UI rendering microtasks: process.nextTick, Promises, Object.observe(åºŸå¼ƒ), MutationObserver &emsp;&emsp;setTimeout çš„ macrotask ,å’Œ Promise çš„ microtask æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥å±•ç°ä»–ä»¬çš„ä¸åŒç‚¹ï¼š 12345678910console.log('script start');setTimeout(function() &#123; console.log('setTimeout');&#125;, 0);Promise.resolve().then(function() &#123; console.log('promise1');&#125;).then(function() &#123; console.log('promise2');&#125;);console.log('script end'); åœ¨è¿™é‡Œï¼ŒsetTimeoutçš„å»¶æ—¶ä¸º0ï¼Œè€ŒPromise.resolve()ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªè¢«resolveäº†promiseå¯¹è±¡ï¼Œå³è¿™é‡Œçš„thenæ–¹æ³•ä¸­çš„å‡½æ•°ä¹Ÿæ˜¯ç›¸å½“äºå¼‚æ­¥çš„ç«‹å³æ‰§è¡Œä»»åŠ¡ï¼Œé‚£ä¹ˆä»–ä»¬åˆ°åº•æ˜¯è°åœ¨å‰è°åœ¨åï¼Ÿ æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆçš„è¿è¡Œç»“æœï¼ˆnode 7.7.3)ï¼š 12345"script start""script end""promise1""promise2""setTimeout" è¿™é‡Œçš„è¿è¡Œç»“æœæ˜¯Promiseçš„ç«‹å³è¿”å›çš„å¼‚æ­¥ä»»åŠ¡ä¼šä¼˜å…ˆäºsetTimeoutå»¶æ—¶ä¸º0çš„ä»»åŠ¡æ‰§è¡Œã€‚ åŸå› æ˜¯ä»»åŠ¡é˜Ÿåˆ—åˆ†ä¸º macrotasks å’Œ microtasksï¼Œè€ŒPromiseä¸­çš„thenæ–¹æ³•çš„å‡½æ•°ä¼šè¢«æ¨å…¥ microtasks é˜Ÿåˆ—ï¼Œè€ŒsetTimeoutçš„ä»»åŠ¡ä¼šè¢«æ¨å…¥ macrotasks é˜Ÿåˆ—ã€‚åœ¨æ¯ä¸€æ¬¡äº‹ä»¶å¾ªç¯ä¸­ï¼Œmacrotask åªä¼šæå–ä¸€ä¸ªæ‰§è¡Œï¼Œè€Œ microtask ä¼šä¸€ç›´æå–ï¼Œç›´åˆ° microtasks é˜Ÿåˆ—æ¸…ç©ºã€‚ æ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œmacrotask queues æˆ‘ä»¬ä¼šç›´æ¥ç§°ä¸º task queuesï¼Œåªæœ‰ microtask queues æ‰ä¼šç‰¹åˆ«æŒ‡æ˜ã€‚ é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘çš„æŸä¸ª microtask ä»»åŠ¡åˆæ¨å…¥äº†ä¸€ä¸ªä»»åŠ¡è¿›å…¥ microtasks é˜Ÿåˆ—ï¼Œé‚£ä¹ˆåœ¨ä¸»çº¿ç¨‹å®Œæˆè¯¥ä»»åŠ¡ä¹‹åï¼Œä»ç„¶ä¼šç»§ç»­è¿è¡Œ microtasks ä»»åŠ¡ç›´åˆ°ä»»åŠ¡é˜Ÿåˆ—è€—å°½ã€‚ è€Œäº‹ä»¶å¾ªç¯æ¯æ¬¡åªä¼šå…¥æ ˆä¸€ä¸ª macrotask ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œå®Œè¯¥ä»»åŠ¡ååˆä¼šå…ˆæ£€æŸ¥ microtasks é˜Ÿåˆ—å¹¶å®Œæˆé‡Œé¢çš„æ‰€æœ‰ä»»åŠ¡åå†æ‰§è¡Œ macrotask 3ã€æ‰‹å†™å®ç°Promise123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146// myPromise function Promise(excutor) &#123; let _this = this; _this.status = 'pending'; _this.value = undefined; _this.reason = undefined; _this.onResolvedCallbacks = []; // å­˜æ”¾thenæˆåŠŸçš„å›è°ƒ _this.onRejectedCallbacks = []; // å­˜æ”¾thenå¤±è´¥çš„å›è°ƒ function resolve(val) &#123; if(_this.status === 'pending') &#123; _this.status = 'resolved'; _this.value = val; _this.onResolvedCallbacks.forEach(function(resolveFn) &#123; if(resolveFn) &#123; resolveFn() &#125; &#125;) &#125; &#125; function reject(reasonValue) &#123; if(_this.status === 'pending') &#123; _this.status = 'rejected'; _this.reason = reasonValue; _this.onRejectedCallbacks.forEach(function(rejectFn) &#123; if(rejectFn) &#123; rejectFn() &#125; &#125;) &#125; &#125; excutor(resolve, reject)&#125;Promise.prototype.then = function (onFulfilled, onRjected) &#123; //æˆåŠŸå’Œå¤±è´¥é»˜è®¤ä¸ä¼ ç»™ä¸€ä¸ªå‡½æ•°ï¼Œè§£å†³äº†é—®é¢˜8 onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : function (value) &#123; return value; &#125; onRjected = typeof onRjected === 'function' ? onRjected : function (err) &#123; throw err; &#125; let _this = this; let promise2; //è¿”å›çš„promise if (_this.status === 'resolved') &#123; promise2 = new Promise(function (resolve, reject) &#123; // å½“æˆåŠŸæˆ–è€…å¤±è´¥æ‰§è¡Œæ—¶æœ‰å¼‚å¸¸é‚£ä¹ˆè¿”å›çš„promiseåº”è¯¥å¤„äºå¤±è´¥çŠ¶æ€ setTimeout(function () &#123;// æ ¹æ®è§„èŒƒè®©é‚£ä¿©å®¶ä¼™å¼‚æ­¥æ‰§è¡Œ try &#123; let x = onFulfilled(_this.value);//è¿™é‡Œè§£é‡Šè¿‡äº† // å†™ä¸€ä¸ªæ–¹æ³•ç»Ÿä¸€å¤„ç†é—®é¢˜1-7 resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;) &#125; if (_this.status === 'rejected') &#123; promise2 = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; try &#123; let x = onRjected(_this.reason); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;) &#125; if (_this.status === 'pending') &#123; promise2 = new Promise(function (resolve, reject) &#123; _this.onResolvedCallbacks.push(function () &#123; setTimeout(function () &#123; try &#123; let x = onFulfilled(_this.value); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e) &#125; &#125;) &#125;); _this.onRejectedCallbacks.push(function () &#123; setTimeout(function () &#123; try &#123; let x = onRjected(_this.reason); resolvePromise(promise2, x, resolve, reject); &#125; catch (e) &#123; reject(e); &#125; &#125;) &#125;); &#125;) &#125; return promise2;&#125;function resolvePromise(promise2, x, resolve, reject) &#123; // æ¥å—å››ä¸ªå‚æ•°ï¼Œæ–°Promiseã€è¿”å›å€¼ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ // æœ‰å¯èƒ½è¿™é‡Œè¿”å›çš„xæ˜¯åˆ«äººçš„promise // å°½å¯èƒ½å…è®¸å…¶ä»–ä¹±å†™ if (promise2 === x) &#123; //è¿™é‡Œåº”è¯¥æŠ¥ä¸€ä¸ªç±»å‹é”™è¯¯ï¼Œæ¥è§£å†³é—®é¢˜4 return reject(new TypeError('å¾ªç¯å¼•ç”¨äº†')) &#125; // çœ‹xæ˜¯ä¸æ˜¯ä¸€ä¸ªpromise,promiseåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ let called; // è¡¨ç¤ºæ˜¯å¦è°ƒç”¨è¿‡æˆåŠŸæˆ–è€…å¤±è´¥ï¼Œç”¨æ¥è§£å†³é—®é¢˜7 //ä¸‹é¢åˆ¤æ–­ä¸Šä¸€æ¬¡thenè¿”å›çš„æ˜¯æ™®é€šå€¼è¿˜æ˜¯å‡½æ•°ï¼Œæ¥è§£å†³é—®é¢˜1ã€2 if (x !== null &amp;&amp; (typeof x === 'object' || typeof x === 'function')) &#123; // å¯èƒ½æ˜¯promise &#123;&#125;,çœ‹è¿™ä¸ªå¯¹è±¡ä¸­æ˜¯å¦æœ‰thenæ–¹æ³•ï¼Œå¦‚æœæœ‰thenæˆ‘å°±è®¤ä¸ºä»–æ˜¯promiseäº† try &#123; let then = x.then;// ä¿å­˜ä¸€ä¸‹xçš„thenæ–¹æ³• if (typeof then === 'function') &#123; // æˆåŠŸ //è¿™é‡Œçš„yä¹Ÿæ˜¯å®˜æ–¹è§„èŒƒï¼Œå¦‚æœè¿˜æ˜¯promiseï¼Œå¯ä»¥å½“ä¸‹ä¸€æ¬¡çš„xä½¿ç”¨ //ç”¨callæ–¹æ³•ä¿®æ”¹æŒ‡é’ˆä¸ºxï¼Œå¦åˆ™thisæŒ‡å‘window then.call(x, function (y) &#123; if (called) return //å¦‚æœè°ƒç”¨è¿‡å°±returnæ‰ called = true // yå¯èƒ½è¿˜æ˜¯ä¸€ä¸ªpromiseï¼Œåœ¨å»è§£æç›´åˆ°è¿”å›çš„æ˜¯ä¸€ä¸ªæ™®é€šå€¼ resolvePromise(promise2, y, resolve, reject)//é€’å½’è°ƒç”¨ï¼Œè§£å†³äº†é—®é¢˜6 &#125;, function (err) &#123; //å¤±è´¥ if (called) return called = true reject(err); &#125;) &#125; else &#123; resolve(x) &#125; &#125; catch (e) &#123; if (called) return called = true; reject(e); &#125; &#125; else &#123; // è¯´æ˜æ˜¯ä¸€ä¸ªæ™®é€šå€¼1 resolve(x); // è¡¨ç¤ºæˆåŠŸäº† &#125;&#125; 4ã€Function.proto(getPrototypeOf)æ˜¯ä»€ä¹ˆï¼Ÿè·å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œåœ¨chromeä¸­å¯ä»¥é€šè¿‡protoçš„å½¢å¼ï¼Œæˆ–è€…åœ¨ES6ä¸­å¯ä»¥é€šè¿‡Object.getPrototypeOfçš„å½¢å¼ã€‚ é‚£ä¹ˆFunction.protoæ˜¯ä»€ä¹ˆä¹ˆï¼Ÿä¹Ÿå°±æ˜¯è¯´Functionç”±ä»€ä¹ˆå¯¹è±¡ç»§æ‰¿è€Œæ¥ï¼Œæˆ‘ä»¬æ¥åšå¦‚ä¸‹åˆ¤åˆ«ã€‚ 123Function.__proto__==Object.prototype //falseFunction.__proto__.__proto__==Object.prototype //trueFunction.__proto__==Function.prototype//true æˆ‘ä»¬å‘ç°Functionçš„åŸå‹ä¹Ÿæ˜¯Functionã€‚ æˆ‘ä»¬ç”¨å›¾å¯ä»¥æ¥æ˜ç¡®è¿™ä¸ªå…³ç³»ï¼š æ­¤å¤„å€Ÿå›¾äº[https://juejin.im/post/5b44a485e51d4519945fb6b7] 5ã€è§‚å¯Ÿè€…æˆ–è®¢é˜…æ¨¡å¼çš„ç®€å•å®ç°12345678910111213141516171819function Events()&#123;this.on=function(eventName,callBack)&#123; if(!this.handles)&#123; this.handles=&#123;&#125;; &#125; if(!this.handles[eventName])&#123; this.handles[eventName]=[]; &#125; this.handles[eventName].push(callBack);&#125;this.emit=function(eventName,obj)&#123; if(this.handles[eventName])&#123; for(var i=0;o&lt;this.handles[eventName].length;i++)&#123; this.handles[eventName][i](obj); &#125; &#125;&#125;return this;&#125; è¿™æ ·æˆ‘ä»¬å°±å®šä¹‰äº†Eventsï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹æ¥è°ƒç”¨ï¼š 123456var events=new Events();events.on('say',function(name)&#123; console.log('Hello',nama)&#125;);events.emit('say','Jony yu');//ç»“æœå°±æ˜¯é€šè¿‡emitè°ƒç”¨ä¹‹åï¼Œè¾“å‡ºäº†Jony yu 6ã€è£…é¥°å™¨ï¼ˆDecoratorsï¼‰ æˆ‘ä»¬çŸ¥é“ç»§æ‰¿æ¨¡å¼æ˜¯ä¸°å¯Œå­å…ƒç´ â€œå†…æ¶µâ€çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œä¸ç®¡æ˜¯ç»§æ‰¿æ¥å£è¿˜æ˜¯å­ç±»ç»§æ‰¿åŸºç±»ã€‚è€Œè£…é¥°è€…æ¨¡å¼å¯ä»¥åœ¨ä¸æ”¹å˜ç»§æ‰¿å…³ç³»çš„å‰æä¸‹ï¼ŒåŒ…è£…å…ˆæœ‰çš„æ¨¡å—ï¼Œä½¿å…¶å†…æ¶µæ›´åŠ ä¸°å¯Œï¼Œå¹¶ä¸ä¼šå½±å“åˆ°åŸæ¥çš„åŠŸèƒ½ã€‚ä¸ç»§æ‰¿ç›¸æ¯”ï¼Œæ›´åŠ çš„çµæ´» (1)ã€ç±»æ–¹æ³•çš„è£…é¥°å™¨ ä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹ç”¨è£…é¥°å™¨æ¥ä¿®é¥°å‡½æ•°ï¼Œé¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415let temple;function log(target, key, descriptor) &#123; console.log(`$&#123;key&#125; was called!`); temple = target;&#125;class P &#123; @log foo() &#123; console.log('Do something'); &#125;&#125;const p = new P()p.foo()console.log(P.prototype === temple) //true ä¸Šè¿°æ˜¯å®ä¾‹æ–¹æ³•fooä¸­æˆ‘ä»¬ç”¨logå‡½æ•°ä¿®é¥°ï¼Œlogå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œé€šè¿‡P.prototype === temple(target)å¯ä»¥åˆ¤æ–­ï¼Œåœ¨ç±»çš„å®ä¾‹å‡½æ•°çš„è£…é¥°å™¨å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç±»çš„åŸå‹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå‡½æ•°åæœ¬èº«ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè¯¥å‡½æ•°çš„æè¿°å±æ€§ã€‚ å…·ä½“æ€»ç»“å¦‚ä¸‹ï¼Œå¯¹äºç±»çš„å‡½æ•°çš„è£…é¥°å™¨å‡½æ•°ï¼Œä¾æ¬¡æ¥å—çš„å‚æ•°ä¸ºï¼š targetï¼šå¦‚æœä¿®é¥°çš„æ˜¯ç±»çš„å®ä¾‹å‡½æ•°ï¼Œé‚£ä¹ˆtargetå°±æ˜¯ç±»çš„åŸå‹ã€‚å¦‚æœä¿®é¥°çš„æ˜¯ç±»çš„é™æ€å‡½æ•°ï¼Œé‚£ä¹ˆtargetå°±æ˜¯ç±»æœ¬èº«ã€‚ keyï¼š è¯¥å‡½æ•°çš„å‡½æ•°åã€‚ descriptorï¼šè¯¥å‡½æ•°çš„æè¿°å±æ€§ï¼Œæ¯”å¦‚ configurableã€valueã€enumerableç­‰ã€‚ ä»ä¸Šè¿°çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”¨è£…é¥°å™¨æ¥ä¿®é¥°ç›¸åº”çš„ç±»çš„å‡½æ•°ååˆ†æ–¹ä¾¿ï¼š 1234@logfoo() &#123; ...&#125; (2)ã€ç±»çš„è£…é¥°å™¨ è£…é¥°å‡½æ•°ä¹Ÿå¯ä»¥ç›´æ¥ä¿®é¥°ç±»ï¼š 1234567891011121314let templefunction foo(target)&#123; console.log(target); temple = target&#125;@fooclass P&#123; constructor()&#123; &#125;&#125;const p = new P();temple === P //true å½“è£…é¥°å‡½æ•°ç›´æ¥ä¿®é¥°ç±»çš„æ—¶å€™ï¼Œè£…é¥°å‡½æ•°æ¥å—å”¯ä¸€çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯è¯¥è¢«ä¿®é¥°ç±»æœ¬èº«ã€‚ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œè¾“å‡ºçš„targetå°±æ˜¯ç±»Pçš„æœ¬èº«ã€‚ æ­¤å¤–ï¼Œåœ¨ä¿®é¥°ç±»çš„æ—¶å€™ï¼Œå¦‚æœè£…é¥°å‡½æ•°æœ‰è¿”å›å€¼ï¼Œè¯¥è¿”å›å€¼ä¼šé‡æ–°å®šä¹‰è¿™ä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯è¯´å½“è£…é¥°å‡½æ•°æœ‰è¿”å›å€¼æ—¶ï¼Œå…¶å®æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªæ–°ç±»ï¼Œè¯¥æ–°ç±»é€šè¿‡è¿”å›å€¼æ¥å®šä¹‰ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼š 1234567891011121314151617function foo(target)&#123; return class extends target&#123; name = 'Jony'; sayHello()&#123; console.log("Hello "+ this.name) &#125; &#125;&#125;@fooclass P&#123; constructor()&#123; &#125;&#125;const p = new P();p.sayHello(); // ä¼šè¾“å‡ºHello Jony ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œå½“è£…é¥°å‡½æ•°fooæœ‰è¿”å›å€¼æ—¶ï¼Œå®é™…ä¸ŠPç±»å·²ç»è¢«è¿”å›å€¼æ‰€ä»£è¡¨çš„æ–°ç±»æ‰€ä»£æ›¿ï¼Œå› æ­¤Pçš„å®ä¾‹pæ‹¥æœ‰sayHelloæ–¹æ³•ã€‚ (3)ã€ç±»çš„å±æ€§çš„è£…é¥°å™¨ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ç±»çš„å±æ€§çš„è£…é¥°å™¨,è£…é¥°å‡½æ•°ä¿®é¥°ç±»çš„å±æ€§æ—¶ï¼Œåœ¨ç±»å®ä¾‹åŒ–çš„æ—¶å€™è°ƒç”¨å±æ€§çš„è£…é¥°å‡½æ•°ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š 12345678910function foo(target,name)&#123; console.log("target is",target); console.log("name is",name)&#125;class P&#123; @foo name = 'Jony'&#125;const p = new P();//ä¼šä¾æ¬¡è¾“å‡º target is f P() name is Jony è¿™é‡Œå¯¹äºç±»çš„å±æ€§çš„è£…é¥°å™¨å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¯¹äºé™æ€å±æ€§è€Œè¨€ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æœ¬èº«ï¼Œå¯¹äºå®ä¾‹å±æ€§è€Œè¨€ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»çš„åŸå‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å±æ€§çš„åå­—ã€‚ (4)ã€ç±»å‡½æ•°å‚æ•°çš„è£…é¥°å™¨ æ¥ç€æ¥çœ‹ç±»å‡½æ•°å‚æ•°çš„è£…é¥°å™¨ï¼Œç±»å‡½æ•°çš„å‚æ•°è£…é¥°å™¨å¯ä»¥ä¿®é¥°ç±»çš„æ„å»ºå‡½æ•°ä¸­çš„å‚æ•°ï¼Œä»¥åŠç±»ä¸­å…¶ä»–æ™®é€šå‡½æ•°ä¸­çš„å‚æ•°ã€‚è¯¥è£…é¥°å™¨åœ¨ç±»çš„æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™æ‰§è¡Œï¼Œä¸‹é¢æ¥çœ‹å®ä¾‹ï¼š 123456789101112function foo(target,key,index)&#123; console.log("target is",target); console.log("key is",key); console.log("index is",index)&#125;class P&#123; test(@foo a)&#123; &#125;&#125;const p = new P();p.test("Hello Jony")// ä¾æ¬¡è¾“å‡º f P() , test , 0 ç±»å‡½æ•°å‚æ•°çš„è£…é¥°å™¨å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç±»æœ¬èº«ï¼Œç±»ä¸­è¯¥è¢«ä¿®é¥°çš„å‡½æ•°æœ¬èº«ï¼Œä»¥åŠè¢«ä¿®é¥°çš„å‚æ•°åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•å€¼ã€‚ä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œä¼šä¾æ¬¡è¾“å‡º f P() ã€testå’Œ0ã€‚å†æ¬¡æ˜ç¡®ä¸€ä¸‹ä¿®é¥°å‡½æ•°å‚æ•°çš„è£…é¥°å™¨å‡½æ•°ä¸­çš„å‚æ•°å«ä¹‰ï¼š targetï¼š ç±»æœ¬èº« keyï¼šè¯¥å‚æ•°æ‰€åœ¨çš„å‡½æ•°çš„å‡½æ•°å indexï¼š è¯¥å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•å€¼ ä»ä¸Šé¢çš„Typescritä¸­åœ¨åŸºç±»ä¸­å¸¸ç”¨çš„è£…é¥°å™¨åï¼Œæˆ‘ä»¬å‘ç°ï¼š è£…é¥°å™¨å¯ä»¥èµ·åˆ°åˆ†ç¦»å¤æ‚é€»è¾‘çš„åŠŸèƒ½ï¼Œä¸”ä½¿ç”¨ä¸Šæå…¶ç®€å•æ–¹ä¾¿ã€‚ä¸ç»§æ‰¿ç›¸æ¯”ï¼Œä¹Ÿæ›´åŠ çµæ´»ï¼Œå¯ä»¥ä»è£…é¥°ç±»ï¼Œåˆ°è£…é¥°ç±»å‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥è¯´æ­¦è£…åˆ°äº†â€œç‰™é½¿â€ã€‚ ä¸‰ã€httpã€htmlå’Œæµè§ˆå™¨ç¯‡1ã€httpå’Œhttpshttpsçš„SSLåŠ å¯†æ˜¯åœ¨ä¼ è¾“å±‚å®ç°çš„ã€‚ (1)httpå’Œhttpsçš„åŸºæœ¬æ¦‚å¿µ http: è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ï¼Œç”¨äºä»WWWæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘ã€‚ https: æ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆï¼Œå³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚ httpsåè®®çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šå»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ç¡®ä¿æ•°ç»„çš„ä¼ è¾“ï¼Œç¡®ä¿ç½‘ç«™çš„çœŸå®æ€§ã€‚ (2)httpå’Œhttpsçš„åŒºåˆ«ï¼Ÿ httpä¼ è¾“çš„æ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯æ˜æ–‡çš„ï¼Œç½‘æ™¯å…¬å¸è®¾ç½®äº†SSLåè®®æ¥å¯¹httpåè®®ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œç®€å•æ¥è¯´httpsåè®®æ˜¯ç”±httpå’Œsslåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“å’Œèº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®çš„å®‰å…¨æ€§æ›´é«˜ã€‚ä¸»è¦çš„åŒºåˆ«å¦‚ä¸‹ï¼š Httpsåè®®éœ€è¦caè¯ä¹¦ï¼Œè´¹ç”¨è¾ƒé«˜ã€‚ httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚ ä½¿ç”¨ä¸åŒçš„é“¾æ¥æ–¹å¼ï¼Œç«¯å£ä¹Ÿä¸åŒï¼Œä¸€èˆ¬è€Œè¨€ï¼Œhttpåè®®çš„ç«¯å£ä¸º80ï¼Œhttpsçš„ç«¯å£ä¸º443 httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚ (3)httpsåè®®çš„å·¥ä½œåŸç† å®¢æˆ·ç«¯åœ¨ä½¿ç”¨HTTPSæ–¹å¼ä¸WebæœåŠ¡å™¨é€šä¿¡æ—¶æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚ å®¢æˆ·ä½¿ç”¨https urlè®¿é—®æœåŠ¡å™¨ï¼Œåˆ™è¦æ±‚web æœåŠ¡å™¨å»ºç«‹sslé“¾æ¥ã€‚ webæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ä¹‹åï¼Œä¼šå°†ç½‘ç«™çš„è¯ä¹¦ï¼ˆè¯ä¹¦ä¸­åŒ…å«äº†å…¬é’¥ï¼‰ï¼Œè¿”å›æˆ–è€…è¯´ä¼ è¾“ç»™å®¢æˆ·ç«¯ã€‚ å®¢æˆ·ç«¯å’ŒwebæœåŠ¡å™¨ç«¯å¼€å§‹åå•†SSLé“¾æ¥çš„å®‰å…¨ç­‰çº§ï¼Œä¹Ÿå°±æ˜¯åŠ å¯†ç­‰çº§ã€‚ å®¢æˆ·ç«¯æµè§ˆå™¨é€šè¿‡åŒæ–¹åå•†ä¸€è‡´çš„å®‰å…¨ç­‰çº§ï¼Œå»ºç«‹ä¼šè¯å¯†é’¥ï¼Œç„¶åé€šè¿‡ç½‘ç«™çš„å…¬é’¥æ¥åŠ å¯†ä¼šè¯å¯†é’¥ï¼Œå¹¶ä¼ é€ç»™ç½‘ç«™ã€‚ webæœåŠ¡å™¨é€šè¿‡è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥ã€‚ webæœåŠ¡å™¨é€šè¿‡ä¼šè¯å¯†é’¥åŠ å¯†ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ã€‚ (4)httpsåè®®çš„ä¼˜ç‚¹ ä½¿ç”¨HTTPSåè®®å¯è®¤è¯ç”¨æˆ·å’ŒæœåŠ¡å™¨ï¼Œç¡®ä¿æ•°æ®å‘é€åˆ°æ­£ç¡®çš„å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ï¼› HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œè¦æ¯”httpåè®®å®‰å…¨ï¼Œå¯é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«çªƒå–ã€æ”¹å˜ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ HTTPSæ˜¯ç°è¡Œæ¶æ„ä¸‹æœ€å®‰å…¨çš„è§£å†³æ–¹æ¡ˆï¼Œè™½ç„¶ä¸æ˜¯ç»å¯¹å®‰å…¨ï¼Œä½†å®ƒå¤§å¹…å¢åŠ äº†ä¸­é—´äººæ”»å‡»çš„æˆæœ¬ã€‚ è°·æ­Œæ›¾åœ¨2014å¹´8æœˆä»½è°ƒæ•´æœç´¢å¼•æ“ç®—æ³•ï¼Œå¹¶ç§°â€œæ¯”èµ·åŒç­‰HTTPç½‘ç«™ï¼Œé‡‡ç”¨HTTPSåŠ å¯†çš„ç½‘ç«™åœ¨æœç´¢ç»“æœä¸­çš„æ’åå°†ä¼šæ›´é«˜â€ã€‚ (5)httpsåè®®çš„ç¼ºç‚¹ httpsæ¡æ‰‹é˜¶æ®µæ¯”è¾ƒè´¹æ—¶ï¼Œä¼šä½¿é¡µé¢åŠ è½½æ—¶é—´å»¶é•¿50%ï¼Œå¢åŠ 10%~20%çš„è€—ç”µã€‚ httpsç¼“å­˜ä¸å¦‚httpé«˜æ•ˆï¼Œä¼šå¢åŠ æ•°æ®å¼€é”€ã€‚ SSLè¯ä¹¦ä¹Ÿéœ€è¦é’±ï¼ŒåŠŸèƒ½è¶Šå¼ºå¤§çš„è¯ä¹¦è´¹ç”¨è¶Šé«˜ã€‚ SSLè¯ä¹¦éœ€è¦ç»‘å®šIPï¼Œä¸èƒ½å†åŒä¸€ä¸ªipä¸Šç»‘å®šå¤šä¸ªåŸŸåï¼Œipv4èµ„æºæ”¯æŒä¸äº†è¿™ç§æ¶ˆè€—ã€‚ 2ã€http2.0é¦–å…ˆè¡¥å……ä¸€ä¸‹ï¼Œhttpå’Œhttpsçš„åŒºåˆ«ï¼Œç›¸æ¯”äºhttp,httpsæ˜¯åŸºäºsslåŠ å¯†çš„httpåè®®ç®€è¦æ¦‚æ‹¬ï¼šhttp2.0æ˜¯åŸºäº1999å¹´å‘å¸ƒçš„http1.0ä¹‹åçš„é¦–æ¬¡æ›´æ–°ã€‚ æå‡è®¿é—®é€Ÿåº¦ï¼ˆå¯ä»¥å¯¹äºï¼Œè¯·æ±‚èµ„æºæ‰€éœ€æ—¶é—´æ›´å°‘ï¼Œè®¿é—®é€Ÿåº¦æ›´å¿«ï¼Œç›¸æ¯”http1.0ï¼‰ å…è®¸å¤šè·¯å¤ç”¨ï¼šå¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„HTTP/2è¿æ¥å‘é€å¤šé‡è¯·æ±‚-å“åº”ä¿¡æ¯ã€‚æ”¹å–„äº†ï¼šåœ¨http1.1ä¸­ï¼Œæµè§ˆå™¨å®¢æˆ·ç«¯åœ¨åŒä¸€æ—¶é—´ï¼Œé’ˆå¯¹åŒä¸€åŸŸåä¸‹çš„è¯·æ±‚æœ‰ä¸€å®šæ•°é‡é™åˆ¶ï¼ˆè¿æ¥æ•°é‡ï¼‰ï¼Œè¶…è¿‡é™åˆ¶ä¼šè¢«é˜»å¡ã€‚ äºŒè¿›åˆ¶åˆ†å¸§ï¼šHTTP2.0ä¼šå°†æ‰€æœ‰çš„ä¼ è¾“ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„ä¿¡æ¯æˆ–è€…å¸§ï¼Œå¹¶å¯¹ä»–ä»¬è¿›è¡ŒäºŒè¿›åˆ¶ç¼–ç  é¦–éƒ¨å‹ç¼© æœåŠ¡å™¨ç«¯æ¨é€ 3ã€ä¸€ä¸ªå›¾ç‰‡urlè®¿é—®åç›´æ¥ä¸‹è½½æ€æ ·å®ç°ï¼Ÿè¯·æ±‚çš„è¿”å›å¤´é‡Œé¢ï¼Œç”¨äºæµè§ˆå™¨è§£æçš„é‡è¦å‚æ•°å°±æ˜¯OSSçš„APIæ–‡æ¡£é‡Œé¢çš„è¿”å›httpå¤´ï¼Œå†³å®šç”¨æˆ·ä¸‹è½½è¡Œä¸ºçš„å‚æ•°ã€‚ ä¸‹è½½çš„æƒ…å†µä¸‹ï¼š request1234561. x-oss-object-type: Normal2. x-oss-request-id: 598D5ED34F29D01FE2925F413. x-oss-storage-class: Standard 4ã€iframeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿå®šä¹‰ï¼šiframeå…ƒç´ ä¼šåˆ›å»ºåŒ…å«å¦ä¸€ä¸ªæ–‡æ¡£çš„å†…è”æ¡†æ¶æç¤ºï¼šå¯ä»¥å°†æç¤ºæ–‡å­—æ”¾åœ¨ä¹‹é—´ï¼Œæ¥æç¤ºæŸäº›ä¸æ”¯æŒiframeçš„æµè§ˆå™¨ ç¼ºç‚¹ï¼š ä¼šé˜»å¡ä¸»é¡µé¢çš„onloadäº‹ä»¶ æœç´¢å¼•æ“æ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEOï¼ˆsearch engine optimizationï¼‰ æœç´¢å¼•æ“ä¼˜åŒ– iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŒºåŸŸæœ‰é™åˆ¶æ‰€ä»¥ä¼šå½±å“æ€§èƒ½ã€‚ 5ã€Doctypeä½œç”¨? ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰?Doctypeå£°æ˜äºæ–‡æ¡£æœ€å‰é¢ï¼Œå‘Šè¯‰æµè§ˆå™¨ä»¥ä½•ç§æ–¹å¼æ¥æ¸²æŸ“é¡µé¢ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸¥æ ¼æ¨¡å¼å’Œæ··æ‚æ¨¡å¼ã€‚ ä¸¥æ ¼æ¨¡å¼çš„æ’ç‰ˆå’Œ JS è¿ä½œæ¨¡å¼æ˜¯ ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚ æ··æ‚æ¨¡å¼ï¼Œå‘åå…¼å®¹ï¼Œæ¨¡æ‹Ÿè€å¼æµè§ˆå™¨ï¼Œé˜²æ­¢æµè§ˆå™¨æ— æ³•å…¼å®¹é¡µé¢ã€‚ 6ã€Cookieå¦‚ä½•é˜²èŒƒXSSæ”»å‡»XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯æŒ‡æ”»å‡»è€…åœ¨è¿”å›çš„HTMLä¸­åµŒå…¥javascriptè„šæœ¬ï¼Œä¸ºäº†å‡è½»è¿™äº›æ”»å‡»ï¼Œéœ€è¦åœ¨HTTPå¤´éƒ¨é…ä¸Šï¼Œset-cookieï¼š httponly-è¿™ä¸ªå±æ€§å¯ä»¥é˜²æ­¢XSS,å®ƒä¼šç¦æ­¢javascriptè„šæœ¬æ¥è®¿é—®cookieã€‚ secure - è¿™ä¸ªå±æ€§å‘Šè¯‰æµè§ˆå™¨ä»…åœ¨è¯·æ±‚ä¸ºhttpsçš„æ—¶å€™å‘é€cookieã€‚ ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šSet-Cookie=â€¦.. 7ã€viewportå’Œç§»åŠ¨ç«¯å¸ƒå±€çœ‹äº†å°å§å§çš„æ–‡ç« æŒºå¥½çš„ï¼š å“åº”å¼å¸ƒå±€çš„å¸¸ç”¨è§£å†³æ–¹æ¡ˆå¯¹æ¯”(åª’ä½“æŸ¥è¯¢ã€ç™¾åˆ†æ¯”ã€remå’Œvw/vhï¼‰ å››ã€CSSç›¸å…³1ã€ç”»ä¸€æ¡0.5pxçš„çº¿ é‡‡ç”¨meta viewportçš„æ–¹å¼ é‡‡ç”¨ border-imageçš„æ–¹å¼ é‡‡ç”¨transform: scale()çš„æ–¹å¼ 2ã€linkæ ‡ç­¾å’Œimportæ ‡ç­¾çš„åŒºåˆ« linkå±äºhtmlæ ‡ç­¾ï¼Œè€Œ@importæ˜¯cssæä¾›çš„ é¡µé¢è¢«åŠ è½½æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„cssä¼šç­‰åˆ°é¡µé¢åŠ è½½ç»“æŸååŠ è½½ã€‚ linkæ˜¯htmlæ ‡ç­¾ï¼Œå› æ­¤æ²¡æœ‰å…¼å®¹æ€§ï¼Œè€Œ@importåªæœ‰IE5ä»¥ä¸Šæ‰èƒ½è¯†åˆ«ã€‚ linkæ–¹å¼æ ·å¼çš„æƒé‡é«˜äº@importçš„ã€‚ 3ã€å¤šè¡Œå…ƒç´ çš„æ–‡æœ¬çœç•¥å·1234 display: -webkit-box-webkit-box-orient:vertical-web-line-clamp:3overflow:hidden]]></content>
      <categories>
        <category>é¢è¯•é¢˜ç±»ç›®</category>
      </categories>
      <tags>
        <tag>é¢è¯•é¢˜ç±»ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IOCè®¾è®¡ç†å¿µ]]></title>
    <url>%2F2019%2F01%2F04%2FIOC%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ IoCIoC çš„å…¨ç§°å«åš Inversion of Controlï¼Œå¯ç¿»è¯‘ä¸ºä¸ºã€Œæ§åˆ¶åè½¬ã€æˆ–ã€Œä¾èµ–å€’ç½®ã€ï¼Œå®ƒä¸»è¦åŒ…å«äº†ä¸‰ä¸ªå‡†åˆ™ï¼š 1ã€é«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¬¡çš„æ¨¡å—ï¼Œå®ƒä»¬éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡ 2ã€æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ï¼Œå…·ä½“å®ç°åº”è¯¥ä¾èµ–äºæŠ½è±¡ 3ã€é¢å‘æ¥å£ç¼–ç¨‹ è€Œä¸è¦é¢å‘å®ç°ç¼–ç¨‹ ä¾èµ–æ³¨å…¥ æ‰€è°“çš„ä¾èµ–æ³¨å…¥ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠé«˜å±‚æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—é€šè¿‡ä¼ å‚çš„æ–¹å¼æŠŠä¾èµ–ã€Œæ³¨å…¥ã€åˆ°æ¨¡å—å†…éƒ¨ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼æ”¹é€ æˆå¦‚ä¸‹æ–¹å¼ï¼š 12345678910111213141516171819202122232425262728293031// app.jsclass App &#123; constructor(options) &#123; this.options = options; this.router = options.router; this.track = options.track; this.init(); &#125; init() &#123; window.addEventListener('DOMContentLoaded', () =&gt; &#123; this.router.to('home'); this.track.tracking(); this.options.onReady(); &#125;); &#125;&#125;// index.jsimport App from 'path/to/App';import Router from './modules/Router';import Track from './modules/Track';new App(&#123; router: new Router(), track: new Track(), onReady() &#123; // do something here... &#125;,&#125;); ä½†æ˜¯å¦‚æœäº§å“è¯´å†åŠ ä¸ªåˆ†äº«åŠŸèƒ½ï¼Œè‚¯å®šè¦å†åŠ ä¸ªthis.share = options.share,è¿™æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚ çœ‹ä¸‹é¢çš„ä»£ç : 12345678910111213141516171819class App &#123; static modules = [] constructor(options) &#123; this.options = options; this.init(); &#125; init() &#123; window.addEventListener('DOMContentLoaded', () =&gt; &#123; this.initModules(); this.options.onReady(this); &#125;); &#125; static use(module) &#123; Array.isArray(module) ? module.map(item =&gt; App.use(item)) : App.modules.push(module); &#125; initModules() &#123; App.modules.map(module =&gt; module.init &amp;&amp; typeof module.init == 'function' &amp;&amp; module.init(this)); &#125;&#125; ç»è¿‡æ”¹é€ å App å†…å·²ç»æ²¡æœ‰ã€Œå…·ä½“å®ç°ã€äº†ï¼Œçœ‹ä¸åˆ°ä»»ä½•ä¸šåŠ¡ä»£ç äº†ï¼Œé‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ App æ¥ç®¡ç†æˆ‘ä»¬çš„ä¾èµ–å‘¢ï¼š 1234567891011121314151617181920212223242526272829303132333435// modules/Router.jsimport Router from 'path/to/Router';export default &#123; init(app) &#123; app.router = new Router(app.options.router); app.router.to('home'); &#125;&#125;;// modules/Track.jsimport Track from 'path/to/Track';export default &#123; init(app) &#123; app.track = new Track(app.options.track); app.track.tracking(); &#125;&#125;;// index.jsimport App from 'path/to/App';import Router from './modules/Router';import Track from './modules/Track';App.use([Router, Track]);new App(&#123; router: &#123; mode: 'history', &#125;, track: &#123; // ... &#125;, onReady(app) &#123; // app.options ... &#125;,&#125;); è¿™æ ·é€šè¿‡æ³¨å…¥åˆ°modulesé‡Œåˆå§‹åŒ–ï¼Œå°† App çš„thisä¼ å…¥modulesæ³¨å…¥çš„æ–¹æ³•ä¸­ï¼Œå®ç°ç»‘å®šåˆ° App çš„å¯¹è±¡ä¸Š æ€»ç»“ App æ¨¡å—æ­¤æ—¶åº”è¯¥ç§°ä¹‹ä¸ºã€Œå®¹å™¨ã€æ¯”è¾ƒåˆé€‚äº†ï¼Œè·Ÿä¸šåŠ¡å·²ç»æ²¡æœ‰ä»»ä½•å…³ç³»äº†ï¼Œå®ƒä»…ä»…åªæ˜¯æä¾›äº†ä¸€äº›æ–¹æ³•æ¥è¾…åŠ©ç®¡ç†æ³¨å…¥çš„ä¾èµ–å’Œæ§åˆ¶æ¨¡å—å¦‚ä½•æ‰§è¡Œã€‚æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰æ˜¯ä¸€ç§ã€Œæ€æƒ³ã€ï¼Œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰åˆ™æ˜¯è¿™ä¸€æ€æƒ³çš„ä¸€ç§å…·ä½“ã€Œå®ç°æ–¹å¼ã€ï¼Œè€Œè¿™é‡Œçš„ App åˆ™æ˜¯è¾…åŠ©ä¾èµ–ç®¡ç†çš„ä¸€ä¸ªã€Œå®¹å™¨ã€ã€‚]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨çš„css reset]]></title>
    <url>%2F2018%2F12%2F12%2F%E5%B8%B8%E7%94%A8%E7%9A%84css-reset%2F</url>
    <content type="text"><![CDATA[å¸¸ç”¨çš„css reseté›…è™å·¥ç¨‹å¸ˆæä¾›çš„CSSåˆå§‹åŒ–ç¤ºä¾‹ä»£ç 123456789101112131415body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td &#123; margin:0; padding:0; &#125;body &#123; background:#fff; color:#555; font-size:14px; font-family: Verdana, Arial, Helvetica, sans-serif; &#125;td,th,caption &#123; font-size:14px; &#125;h1, h2, h3, h4, h5, h6 &#123; font-weight:normal; font-size:100%; &#125;address, caption, cite, code, dfn, em, strong, th, var &#123; font-style:normal; font-weight:normal;&#125;a &#123; color:#555; text-decoration:none; &#125;a:hover &#123; text-decoration:underline; &#125;img &#123; border:none; &#125;ol,ul,li &#123; list-style:none; &#125;input, textarea, select, button &#123; font:14px Verdana,Helvetica,Arial,sans-serif; &#125;table &#123; border-collapse:collapse; &#125;html &#123;overflow-y: scroll;&#125; .clearfix:after &#123;content: "."; display: block; height:0; clear:both; visibility: hidden;&#125;.clearfix &#123; *zoom:1; &#125; è…¾è®¯å®˜ç½‘ æ ·å¼åˆå§‹åŒ–123456789body,ol,ul,h1,h2,h3,h4,h5,h6,p,th,td,dl,dd,form,fieldset,legend,input,textarea,select&#123;margin:0;padding:0&#125; body&#123;font:12px"å®‹ä½“","Arial Narrow",HELVETICA;background:#fff;-webkit-text-size-adjust:100%;&#125; a&#123;color:#2d374b;text-decoration:none&#125; a:hover&#123;color:#cd0200;text-decoration:underline&#125; em&#123;font-style:normal&#125; li&#123;list-style:none&#125; img&#123;border:0;vertical-align:middle&#125; table&#123;border-collapse:collapse;border-spacing:0&#125; p&#123;word-wrap:break-word&#125; æ–°æµªå®˜ç½‘ æ ·å¼åˆå§‹åŒ–12345678910body,ul,ol,li,p,h1,h2,h3,h4,h5,h6,form,fieldset,table,td,img,div&#123;margin:0;padding:0;border:0;&#125; body&#123;background:#fff;color:#333;font-size:12px; margin-top:5px;font-family:"SimSun","å®‹ä½“","Arial Narrow";&#125; ul,ol&#123;list-style-type:none;&#125; select,input,img,select&#123;vertical-align:middle;&#125; a&#123;text-decoration:none;&#125; a:link&#123;color:#009;&#125; a:visited&#123;color:#800080;&#125; a:hover,a:active,a:focus&#123;color:#c00;text-decoration:underline;&#125; æ·˜å®å®˜ç½‘ æ ·å¼åˆå§‹åŒ–123456789101112131415body, h1, h2, h3, h4, h5, h6, hr, p, blockquote, dl, dt, dd, ul, ol, li, pre, form, fieldset, legend, button, input, textarea, th, td &#123; margin:0; padding:0; &#125; body, button, input, select, textarea &#123; font:12px/1.5 tahoma, arial, \5b8b\4f53; &#125; h1, h2, h3, h4, h5, h6&#123; font-size:100%; &#125; address, cite, dfn, em, var &#123; font-style:normal; &#125; code, kbd, pre, samp &#123; font-family:couriernew, courier, monospace; &#125; small&#123; font-size:12px; &#125; ul, ol &#123; list-style:none; &#125; a &#123; text-decoration:none; &#125; a:hover &#123; text-decoration:underline; &#125; sup &#123; vertical-align:text-top; &#125; sub&#123; vertical-align:text-bottom; &#125; legend &#123; color:#000; &#125; fieldset, img &#123; border:0; &#125; button, input, select, textarea &#123; font-size:100%; &#125; table &#123; border-collapse:collapse; border-spacing:0; &#125; ç½‘æ˜“å®˜ç½‘ æ ·å¼åˆå§‹åŒ–123456789html &#123;overflow-y:scroll;&#125; body &#123;margin:0; padding:29px00; font:12px"\5B8B\4F53",sans-serif;background:#ffffff;&#125; div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,blockquote,p&#123;padding:0; margin:0;&#125; table,td,tr,th&#123;font-size:12px;&#125; li&#123;list-style-type:none;&#125; img&#123;vertical-align:top;border:0;&#125; ol,ul &#123;list-style:none;&#125; h1,h2,h3,h4,h5,h6&#123;font-size:12px; font-weight:normal;&#125; address,cite,code,em,th &#123;font-weight:normal; font-style:normal;&#125; admin10000.com çš„htmlæ¨¡æ¿ï¼Œç”¨äºæ¯æ¬¡æ–°å¼€å‘é¡µé¢ä½¿ç”¨ã€‚123456789101112131415161718&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;&lt;html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn"&gt; &lt;head&gt; &lt;title&gt;ç½‘ç«™æ ‡é¢˜ - Admin10000.com &lt;/title&gt; &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt; &lt;meta http-equiv="Content-Language" content="zh-CN" /&gt; &lt;meta name="Author" content="ç½‘é¡µä½œè€…" /&gt; &lt;meta name="Copyright" content="ç½‘ç«™ç‰ˆæƒ" /&gt; &lt;meta name="keywords" content="ç½‘ç«™å…³é”®å­—" /&gt; &lt;meta name="description" content="ç½‘ç«™æè¿°" /&gt; &lt;link rel="Shortcut Icon" href="ç½‘ç«™.icoå›¾æ ‡è·¯å¾„" /&gt; &lt;link type="text/css" rel="stylesheet" href="CSSæ–‡ä»¶è·¯å¾„" /&gt; &lt;script type="text/javascript" src="JSæ–‡ä»¶è·¯å¾„"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>CSSç±»</category>
      </categories>
      <tags>
        <tag>CSSç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueé¢è¯•é¢˜]]></title>
    <url>%2F2018%2F11%2F29%2Fvue%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"></content>
      <categories>
        <category>é¢è¯•é¢˜ç±»ç›®</category>
      </categories>
      <tags>
        <tag>é¢è¯•é¢˜ç±»ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[reacté¢è¯•é¢˜]]></title>
    <url>%2F2018%2F11%2F29%2Freact%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[1ã€dispatchè§¦å‘actionï¼Œreactè§†å›¾æ›´æ–°è¿‡ç¨‹ å½“æˆ‘ä»¬dispatch ä¸€ä¸ª action çš„æ—¶å€™ï¼Œ è°ƒç”¨çš„å…¶å®æ˜¯ store.dispatchï¼Œè¿™ä¸ªéƒ½æ²¡é—®é¢˜ï¼Œstore.dispatch ä¼šå»è·‘ä¸€éæ‰€æœ‰æ³¨å†Œåœ¨ createStore ä¸­çš„ reducerï¼Œ æ‰¾åˆ°å¯¹åº”çš„ type æ›´æ–°æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ stateã€‚ è€Œæˆ‘ä»¬çš„ç»„ä»¶æƒ³æ‹¿åˆ° store çš„æ•°æ®å¿…é¡»é€šè¿‡ `connect(mapStateToProps, mapDispatchToProps)(App)` åƒè¿™æ ·ï¼Œreact-redux ä¸­çš„ Connect ç»„ä»¶ä¼šåœ¨ `componengDidMount` çš„æ—¶å€™å» è°ƒç”¨ ä¸€ä¸ª `trySubscribe` çš„æ–¹æ³•ï¼Œå…¶å†…éƒ¨è°ƒç”¨ `store.subscrib`e å»è®¢é˜…ä¸€ä¸ª handleChange çš„æ–¹æ³•ã€‚ æ‰€ä»¥å½“ä½  dispatch action çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ Connect ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œ Connect ç»„ä»¶ä¸­ä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªå«åš `storeState` çš„ stateï¼Œæ¯æ¬¡æ‹¿åˆ°æ–°çš„ sotre å°±å»è°ƒç”¨ setStateï¼Œ è§¦å‘ render å‡½æ•°ï¼Œ render å‡½æ•°ä¼šæ ¹æ®ä½  connect ä¸­ä¼ å…¥çš„ mapStateToPropsï¼Œ mapDispatchToPropsï¼ŒåŒ…æ‹¬å¯é€‰å‚æ•° mergePropsï¼Œ å»åšä¸€ä¸ª props çš„åˆå¹¶åŠ¨ä½œï¼Œ æœ€ç»ˆåœ¨ Connect ç»„ä»¶å†…éƒ¨ return å‡ºæ¥ä¸€ä¸ª `createElement(WrappedComponent,this.mergedProps)` è¿™æ ·çš„ä¸œè¥¿ï¼Œè€Œ createElement ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä½ ç»„ä»¶çš„ propsï¼Œ é‚£ä¹ˆæ¯æ¬¡ props å˜äº†ï¼Œå°±ä¼šé©±åŠ¨è§†å›¾çš„æ›´æ–°ã€‚è¿™å°±æ˜¯ Redux å…¶ä¸­çš„ä¸­åšåŸç†ã€‚ 2ã€reduxä¸­é—´ä»¶ ä¸­é—´ä»¶æä¾›ç¬¬ä¸‰æ–¹æ’ä»¶çš„æ¨¡å¼ï¼Œè‡ªå®šä¹‰æ‹¦æˆª action -&gt; reducer çš„è¿‡ç¨‹ã€‚å˜ä¸º action -&gt; middlewares -&gt; reducer ã€‚è¿™ç§æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬æ”¹å˜æ•°æ®æµï¼Œå®ç°å¦‚å¼‚æ­¥ action ï¼Œaction è¿‡æ»¤ï¼Œæ—¥å¿—è¾“å‡ºï¼Œå¼‚å¸¸æŠ¥å‘Šç­‰åŠŸèƒ½ã€‚ å¸¸è§çš„ä¸­é—´ä»¶ï¼š redux-loggerï¼šæä¾›æ—¥å¿—è¾“å‡º redux-thunkï¼šå¤„ç†å¼‚æ­¥æ“ä½œ redux-promiseï¼šå¤„ç†å¼‚æ­¥æ“ä½œï¼ŒactionCreatorçš„è¿”å›å€¼æ˜¯promise 3ã€reduxæœ‰ä»€ä¹ˆç¼ºç‚¹ 1.ä¸€ä¸ªç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®ï¼Œå¿…é¡»ç”±çˆ¶ç»„ä»¶ä¼ è¿‡æ¥ï¼Œè€Œä¸èƒ½åƒfluxä¸­ç›´æ¥ä»storeå–ã€‚2.å½“ä¸€ä¸ªç»„ä»¶ç›¸å…³æ•°æ®æ›´æ–°æ—¶ï¼Œå³ä½¿çˆ¶ç»„ä»¶ä¸éœ€è¦ç”¨åˆ°è¿™ä¸ªç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è¿˜æ˜¯ä¼šé‡æ–°renderï¼Œå¯èƒ½ä¼šæœ‰æ•ˆç‡å½±å“ï¼Œæˆ–è€…éœ€è¦å†™å¤æ‚çš„shouldComponentUpdateè¿›è¡Œåˆ¤æ–­ã€‚ 4ã€reactç»„ä»¶çš„åˆ’åˆ†ä¸šåŠ¡ç»„ä»¶æŠ€æœ¯ç»„ä»¶ï¼Ÿ æ ¹æ®ç»„ä»¶çš„èŒè´£é€šå¸¸æŠŠç»„ä»¶åˆ†ä¸ºUIç»„ä»¶å’Œå®¹å™¨ç»„ä»¶ã€‚ UI ç»„ä»¶è´Ÿè´£ UI çš„å‘ˆç°ï¼Œå®¹å™¨ç»„ä»¶è´Ÿè´£ç®¡ç†æ•°æ®å’Œé€»è¾‘ã€‚ ä¸¤è€…é€šè¿‡React-Redux æä¾›connectæ–¹æ³•è”ç³»èµ·æ¥ã€‚ å…·ä½“ä½¿ç”¨å¯ä»¥å‚ç…§å¦‚ä¸‹é“¾æ¥ï¼š[http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html] 5ã€ä¸ºä»€ä¹ˆè™šæ‹Ÿdomä¼šæé«˜æ€§èƒ½? è™šæ‹Ÿdomç›¸å½“äºåœ¨jså’ŒçœŸå®domä¸­é—´åŠ äº†ä¸€ä¸ªç¼“å­˜ï¼Œåˆ©ç”¨dom diffç®—æ³•é¿å…äº†æ²¡æœ‰å¿…è¦çš„domæ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½ å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š ç”¨ JavaScript å¯¹è±¡ç»“æ„è¡¨ç¤º DOM æ ‘çš„ç»“æ„ï¼›ç„¶åç”¨è¿™ä¸ªæ ‘æ„å»ºä¸€ä¸ªçœŸæ­£çš„ DOM æ ‘ï¼Œæ’åˆ°æ–‡æ¡£å½“ä¸­ å½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ„é€ ä¸€æ£µæ–°çš„å¯¹è±¡æ ‘ã€‚ç„¶åç”¨æ–°çš„æ ‘å’Œæ—§çš„æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸¤æ£µæ ‘å·®å¼‚æŠŠ2æ‰€è®°å½•çš„å·®å¼‚åº”ç”¨åˆ°æ­¥éª¤1æ‰€æ„å»ºçš„çœŸæ­£çš„DOMæ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº†ã€‚ å‚è€ƒé“¾æ¥ï¼š [https://www.zhihu.com/question/29504639?sort=created] 6ã€diffç®—æ³•?æŠŠæ ‘å½¢ç»“æ„æŒ‰ç…§å±‚çº§åˆ†è§£ï¼Œåªæ¯”è¾ƒåŒçº§å…ƒç´ ã€‚ç»™åˆ—è¡¨ç»“æ„çš„æ¯ä¸ªå•å…ƒæ·»åŠ å”¯ä¸€çš„keyå±æ€§ï¼Œæ–¹ä¾¿æ¯”è¾ƒã€‚React åªä¼šåŒ¹é…ç›¸åŒ class çš„ componentï¼ˆè¿™é‡Œé¢çš„classæŒ‡çš„æ˜¯ç»„ä»¶çš„åå­—ï¼‰åˆå¹¶æ“ä½œï¼Œè°ƒç”¨ component çš„ setState æ–¹æ³•çš„æ—¶å€™, React å°†å…¶æ ‡è®°ä¸º dirty.åˆ°æ¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸ, React æ£€æŸ¥æ‰€æœ‰æ ‡è®° dirty çš„ component é‡æ–°ç»˜åˆ¶.é€‰æ‹©æ€§å­æ ‘æ¸²æŸ“ã€‚å¼€å‘äººå‘˜å¯ä»¥é‡å†™shouldComponentUpdateæé«˜diffçš„æ€§èƒ½ã€‚ å‚è€ƒé“¾æ¥ï¼š [https//segmentfault.com/a/1190000000606216] 7ã€reactæ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ (1ï¼‰é‡å†™shouldComponentUpdateæ¥é¿å…ä¸å¿…è¦çš„domæ“ä½œã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨ production ç‰ˆæœ¬çš„react.jsã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨keyæ¥å¸®åŠ©Reactè¯†åˆ«åˆ—è¡¨ä¸­æ‰€æœ‰å­ç»„ä»¶çš„æœ€å°å˜åŒ–ã€‚ å‚è€ƒé“¾æ¥ï¼š [https://segmentfault.com/a/1190000006254212]]]></content>
      <categories>
        <category>é¢è¯•é¢˜ç±»ç›®</category>
      </categories>
      <tags>
        <tag>é¢è¯•é¢˜ç±»ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macä¸­ä½¿ç”¨ç”Ÿæˆé¡¹ç›®ç»“æ„å›¾tree]]></title>
    <url>%2F2018%2F11%2F29%2Fmac%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%94%9F%E6%88%90%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%9B%BEtree%2F</url>
    <content type="text"><![CDATA[mac Mac çš„è¯æ˜¯æ²¡æœ‰è‡ªå¸¦treeå‘½ä»¤çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡homebrewï¼ˆå¦‚æœä½ ä¸çŸ¥é“å®ƒçš„è¯ï¼Œè¿™æ˜¯å®˜ç½‘ï¼‰å®‰è£…ï¼š 12 brew install tree ç„¶åç­‰å¾…å®‰è£…å®Œæˆå 12tree --version # æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸtree --help # æŸ¥çœ‹å¸®åŠ© ä¸­æ–‡Api123456789101112131415161718192021-a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ã€‚-A ä½¿ç”¨ASNIç»˜å›¾å­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶å›¾è€Œéä»¥ASCIIå­—ç¬¦ç»„åˆã€‚-C åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†å„ç§ç±»å‹ã€‚-d æ˜¾ç¤ºç›®å½•åç§°è€Œéå†…å®¹ã€‚-D åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹æ—¶é—´ã€‚-f åœ¨æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ç›¸å¯¹è·¯å¾„åç§°ã€‚-F åœ¨æ‰§è¡Œæ–‡ä»¶ï¼Œç›®å½•ï¼ŒSocketï¼Œç¬¦å·è¿æ¥ï¼Œç®¡é“åç§°åç§°ï¼Œå„è‡ªåŠ ä¸Š"*","/","=","@","|"å·ã€‚-g åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç¾¤ç»„è¯†åˆ«ç ã€‚-i ä¸ä»¥é˜¶æ¢¯çŠ¶åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚-I ä¸æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚-l å¦‚é‡åˆ°æ€§è´¨ä¸ºç¬¦å·è¿æ¥çš„ç›®å½•ï¼Œç›´æ¥åˆ—å‡ºè¯¥è¿æ¥æ‰€æŒ‡å‘çš„åŸå§‹ç›®å½•ã€‚-n ä¸åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ã€‚-N ç›´æ¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼ŒåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ã€‚-p åˆ—å‡ºæƒé™æ ‡ç¤ºã€‚-P åªæ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ã€‚-q ç”¨"?"å·å–ä»£æ§åˆ¶å­—ç¬¦ï¼Œåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ã€‚-s åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•å¤§å°ã€‚-t ç”¨æ–‡ä»¶å’Œç›®å½•çš„æ›´æ”¹æ—¶é—´æ’åºã€‚-u åˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·è¯†åˆ«ç ã€‚-x å°†èŒƒå›´å±€é™åœ¨ç°è¡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè‹¥æŒ‡å®šç›®å½•ä¸‹çš„æŸäº›å­ç›®å½•ï¼Œå…¶å­˜æ”¾äºå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œåˆ™å°†è¯¥å­ç›®å½•äºˆä»¥æ’é™¤åœ¨å¯»æ‰¾èŒƒå›´å¤–ã€‚ Used ä¸‹é¢æ˜¯æˆ‘ç”Ÿæˆä¸Šé¢çš„ç»“æ„æ‰€ç”¨çš„å‘½ä»¤ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸‹ 1tree -I 'node_modules|dist|*.mp3|*.jpg' -f]]></content>
      <categories>
        <category>å·¥å…·ç±»</category>
      </categories>
      <tags>
        <tag>å·¥å…·ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mpvueå…¥æ‰‹åŠé‡åˆ°çš„å‘ç‚¹]]></title>
    <url>%2F2018%2F11%2F29%2Fmpvue%E5%85%A5%E6%89%8B%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91%E7%82%B9%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¯¹äºæœªæ¥è§¦è¿‡å°ç¨‹åºçš„æˆ‘æ¥è¯´ï¼Œæƒ³èµ·æ‰‹åšä¸ªå°ç¨‹åºè¿˜æ˜¯è¦è´¹ç‚¹æ—¶é—´å»å­¦ä¹ ï¼Œä½†æ˜¯mpvueçš„å‡ºç°è®©æˆ‘æèµ·äº†åšå°ç¨‹åºçš„å…´è¶£ã€‚ä»è€Œæˆ‘çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºå°±è¿™ä¹ˆä»mpvueä¸­æ‘¸çˆ¬æ»šæ‰“ä¸­å¼€å§‹äº† mpvue mpvueæ˜¯ä»€ä¹ˆï¼Œæ˜¯ä¸€ä¸ªåˆ©ç”¨vueçš„runtimeå’Œcompilerå°†vueç±»å‹æ–‡ä»¶çš„ä»£ç é€šè¿‡webpackæ‰“åŒ…è½¬è¯‘æˆå°ç¨‹åºçš„ä»£ç ã€‚ è®©æˆ‘ä»¬å…ˆä»å¦‚ä½•è·å–ä¸€ä¸ªmpvueè„šæ‰‹æ¶å¼€å§‹èµ·æ­¥å§ é¦–å…ˆå‡†å¤‡å¥½nodeï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12345678910111213141516171819202122# 1. å…ˆæ£€æŸ¥ä¸‹ Node.js æ˜¯å¦å®‰è£…æˆåŠŸ$ node -vv8.9.0$ npm -v5.6.0# 2. ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå¯ä»¥è€ƒè™‘åˆ‡æ¢æºä¸º taobao æº$ npm set registry https://registry.npm.taobao.org/# 3. å…¨å±€å®‰è£… vue-cli# ä¸€èˆ¬æ˜¯è¦ sudo æƒé™çš„$ npm install --global vue-cli@2.9# 4. åˆ›å»ºä¸€ä¸ªåŸºäº mpvue-quickstart æ¨¡æ¿çš„æ–°é¡¹ç›®# æ–°æ‰‹ä¸€è·¯å›è½¦é€‰æ‹©é»˜è®¤å°±å¯ä»¥äº†$ vue init mpvue/mpvue-quickstart my-project# 5. å®‰è£…ä¾èµ–ï¼Œèµ°ä½ $ cd my-project$ npm install$ npm run dev ä¾æ¬¡æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œåˆ°æœ€åå®‰è£…å¥½æ‰€ä»¥ä¾èµ–ï¼Œæ‰§è¡Œnpm run devè¿™æ—¶å€™æœ¬åœ°æœåŠ¡å°±å¯åŠ¨äº†ï¼Œé¡¹ç›®ç›®å½•ä¸­ä¼šå¤šå‡ºä¸ªdistç›®å½•äº†ã€‚ ä¸Šé¢æ˜¯æ‘˜è‡ª: mpvueæ–‡æ¡£[http://mpvue.com/mpvue/quickstart/#3-mpvue] å‰©ä¸‹çš„ä¸å¤šè¯´å°ä¼™ä¼´ä»¬ç›´æ¥å»å®˜æ–¹æ–‡æ¡£çœ‹å°±å¥½äº†ï¼Œåªä»‹ç»ä¸ªèµ·æ­¥ï¼Œä¸‹é¢æˆ‘ä»¬å°†å¼€å§‹è®²è¿°æˆ‘mpvueçš„å¼€å‘è¿‡ç¨‹ mpvueå¼€å‘çš„æ¡†æ¶å›¾1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677â”œâ”€â”€ ./README.mdâ”œâ”€â”€ ./buildâ”‚ â”œâ”€â”€ ./build/build.jsâ”‚ â”œâ”€â”€ ./build/check-versions.jsâ”‚ â”œâ”€â”€ ./build/dev-client.jsâ”‚ â”œâ”€â”€ ./build/dev-server.jsâ”‚ â”œâ”€â”€ ./build/devbuild.jsâ”‚ â”œâ”€â”€ ./build/prod-server.jsâ”‚ â”œâ”€â”€ ./build/utils.jsâ”‚ â”œâ”€â”€ ./build/vue-loader.conf.jsâ”‚ â”œâ”€â”€ ./build/webpack.base.conf.jsâ”‚ â”œâ”€â”€ ./build/webpack.dev.conf.jsâ”‚ â”œâ”€â”€ ./build/webpack.devprod.config.jsâ”‚ â”œâ”€â”€ ./build/webpack.prod.conf.jsâ”‚ â””â”€â”€ ./build/webpack.prodserver.config.jsâ”œâ”€â”€ ./configâ”‚ â”œâ”€â”€ ./config/dev.env.jsâ”‚ â”œâ”€â”€ ./config/index.jsâ”‚ â””â”€â”€ ./config/prod.env.jsâ”œâ”€â”€ ./index.htmlâ”œâ”€â”€ ./package-lock.jsonâ”œâ”€â”€ ./package.jsonâ”œâ”€â”€ ./project.config.jsonâ”œâ”€â”€ ./srcâ”‚ â”œâ”€â”€ ./src/App.vueâ”‚ â”œâ”€â”€ ./src/app.jsonâ”‚ â”œâ”€â”€ ./src/main.jsâ”‚ â”œâ”€â”€ ./src/componentsâ”‚ â”‚ â”œâ”€â”€ ./src/components/addRecord.vueâ”‚ â”œâ”€â”€ ./src/configâ”‚ â”‚ â””â”€â”€ ./src/config/apiconfigâ”‚ â”‚ â””â”€â”€ ./src/config/apiconfig/config.jsâ”‚ â”œâ”€â”€ ./src/fetchDataâ”‚ â”‚ â”œâ”€â”€ ./src/fetchData/fetchDiscover.jsâ”‚ â”œâ”€â”€ ./src/httpâ”‚ â”‚ â”œâ”€â”€ ./src/http/api.jsâ”‚ â”‚ â””â”€â”€ ./src/http/config.jsâ”‚ â”œâ”€â”€ ./src/main.jsâ”‚ â”œâ”€â”€ ./src/pagesâ”‚ â”‚ â””â”€â”€ ./src/pages/searchlistâ”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/componentâ”‚ â”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/component/courts.vueâ”‚ â”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/component/goodsType.vueâ”‚ â”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/component/priceRange.vueâ”‚ â”‚ â”‚ â””â”€â”€ ./src/pages/searchlist/component/sortView.vueâ”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/index.vueâ”‚ â”‚ â”œâ”€â”€ ./src/pages/searchlist/main.jsâ”‚ â”‚ â””â”€â”€ ./src/pages/searchlist/main.jsonâ”‚ â”œâ”€â”€ ./src/storeâ”‚ â”‚ â”œâ”€â”€ ./src/store/actions.jsâ”‚ â”‚ â”œâ”€â”€ ./src/store/getters.jsâ”‚ â”‚ â”œâ”€â”€ ./src/store/mutaions.jsâ”‚ â”‚ â”œâ”€â”€ ./src/store/mutation-type.jsâ”‚ â”‚ â””â”€â”€ ./src/store/store.jsâ”‚ â””â”€â”€ ./src/utilsâ”‚ â”œâ”€â”€ ./src/utils/dataâ”‚ â”‚ â”œâ”€â”€ ./src/utils/data/city.jsâ”‚ â”‚ â”œâ”€â”€ ./src/utils/data/discoverData.jsâ”‚ â”‚ â”œâ”€â”€ ./src/utils/data/handleUtils.jsâ”‚ â”‚ â”œâ”€â”€ ./src/utils/data/mincity.jsâ”‚ â”‚ â””â”€â”€ ./src/utils/data/region.jsonâ”‚ â”œâ”€â”€ ./src/utils/styleâ”‚ â”‚ â”œâ”€â”€ ./src/utils/style/common.cssâ”‚ â”‚ â””â”€â”€ ./src/utils/style/mixin.cssâ”‚ â””â”€â”€ ./src/utils/tipUtilâ”‚ â””â”€â”€ ./src/utils/tipUtil/tips.jsâ””â”€â”€ ./static â”œâ”€â”€ ./static/images â”‚ â”œâ”€â”€ ./static/images/default_pic.png â”œâ”€â”€ ./static/iview â”‚ â”œâ”€â”€ ./static/iview/action-sheet â”‚ â”‚ â”œâ”€â”€ ./static/iview/action-sheet/index.js â”‚ â”‚ â”œâ”€â”€ ./static/iview/action-sheet/index.json â”‚ â”‚ â”œâ”€â”€ ./static/iview/action-sheet/index.wxml â”‚ â”‚ â””â”€â”€ ./static/iview/action-sheet/index.wxss â””â”€â”€ ./static/weui â””â”€â”€ ./static/weui/weui.css ä¸Šçº¿æµç¨‹å›¾ä¸­æˆ‘ä»¬å…ˆåˆ†æä¸‹ç»“æ„ï¼Œbuildå’Œconfigç›®å½•æ˜¯å­˜æ”¾webpacké…ç½®æ–‡ä»¶çš„ï¼Œæœ‰éœ€è¦ç‰¹æ®Šé…ç½®çš„å°ä¼™ä¼´è‡ªè¡Œä¿®æ”¹é…ç½®å³å¯ã€‚ å‰©ä¸‹çš„çš„å°±æ˜¯srcå’Œstaticç›®å½•ï¼ŒåˆæœŸæ„å»ºå‡ºæ¥çš„é¡¹ç›®å¹¶æ²¡æœ‰staticç›®å½•ï¼Œä½†æ˜¯èƒ½çŸ¥é“å®ƒçš„ä½œç”¨å­˜æ”¾é™æ€æ–‡ä»¶çš„,å…·ä½“åé¢è®²ã€‚ index.htmlæ˜¯ä½œä¸ºè§£æmpvueå…¥å£htmlæ–‡ä»¶ project.config.jsonè¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥è®¾ç½®å°ç¨‹åºå¼€å‘å·¥å…·è®¾ç½®å’Œappidçš„é…ç½®æ–‡ä»¶ å†åˆ°srcç›®å½•ï¼Œcomponentså­˜æ”¾vueç»„ä»¶ï¼Œconfigå’Œhttpæ˜¯å°è£…è¯·æ±‚æ–¹æ³•çš„ï¼Œutilsæ˜¯å­˜æ”¾å…¬å…±æ–¹æ³•ç±»æ–‡ä»¶çš„ï¼Œpagesæ˜¯å­˜æ”¾é¡µé¢çº§æ–‡ä»¶çš„ï¼Œæ¯ä¸ªpageé‡Œæœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯index.vueã€main.jsã€main.jsonã€‚ srcé‡Œæœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œmain.jsã€App.vue,è¿™ä¸¤ä¸ªåˆ†åˆ«å¯¹åº”vueæ¡†æ¶ä¸­çš„å…¥å£jsæ–‡ä»¶å’Œå…¥å£æ¨¡æ¿ï¼Œè¿˜æœ‰ä¸ªapp.jsonè¿™æ˜¯å°ç¨‹åºé…ç½®è·¯ç”±ç­‰ä¿¡æ¯çš„æ–‡ä»¶ è§£æä¸Šè¯‰å†…å®¹ç›®å½•1ã€staticç›®å½•çš„ä½œç”¨staticæ˜¯å­˜æ”¾é™æ€æ–‡ä»¶çš„ï¼Œmpvueæ¡†æ¶ç”±äºç›®å‰æ¶æ„è¿˜ä¸æ˜¯å¾ˆæˆç†Ÿï¼Œæ‰€ä»¥åœ¨é¡µé¢ä¸­å¼•å…¥å›¾ç‰‡èµ„æºæ—¶å°†å›¾ç‰‡æ”¾åˆ°srcç›®å½•ä¸‹ï¼Œæ‰“åŒ…åˆ°distï¼Œå¼•å…¥å›¾ç‰‡æ˜¯åŠ è½½ä¸å‡ºæ¥çš„ã€‚æ‰€ä»¥ç›®å‰å°±å…ˆå°†staticç›®å½•ä»¥webpackçš„copyæ–¹æ³•å°†staticç›®å½•copyåˆ°distç›®å½•ï¼Œæ–¹ä¾¿å°ç¨‹åºçš„å¯¼å…¥ã€‚åŒæ—¶æˆ‘ä»¬æƒ³ç€å¦‚ä½•å¼•å…¥ä¸‰æ–¹çš„å°ç¨‹åºUIåº“ï¼Œè¿™æ—¶å€™æƒ³åˆ°mpvueæ˜¯å°†vueä»£ç è£…æˆå°ç¨‹åºä»£ç ï¼Œæˆ‘ä»¬å°†å°ç¨‹åºçš„UIç»„ä»¶å¼•å…¥åˆ°distç›®å½•å³å¯ï¼Œä¾›mpvueä½¿ç”¨ã€‚è¦åšåˆ°è¿™ç‚¹å¯¿é™©å°†éœ€è¦çš„UIç»„ä»¶å­˜æ”¾åˆ°staticå¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹ã€‚ç„¶åé¡µé¢ä¸­å¦‚ä½•ä½¿ç”¨å‘¢ï¼Œå°±éœ€è¦åˆ°pageç›®å½•ä¸‹çš„main.jsonæ–‡ä»¶ä¸­é…ç½®äº†ï¼Œçœ‹ä¸‹é¢ä»£ç ï¼š 123456&#123; "navigationBarTitleText": "é¡µé¢æ ‡é¢˜", "usingComponents": &#123; "i-icon": "../../static/iview/icon/index" &#125;&#125; è¿™æ ·å¼•å…¥ååœ¨é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ç»„ä»¶å³å¯ï¼š1&lt;i-icon class="iconUnfold" type="unfold" /&gt; 2ã€storeå¦‚ä½•ä½¿ç”¨storeçš„ä½¿ç”¨å’Œvueçš„ä½¿ç”¨æ˜¯å‡ ä¹ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„åœ¨äºå®ƒçš„å¼•å…¥åŠstoreå­˜å‚¨çš„setå’Œgetéœ€è¦æ”¹æˆå°ç¨‹åºçš„æ–¹æ³•ã€‚ 1ã€åœ¨main.jså…¥å£æ–‡ä»¶æ—¶å°†storeå®ä¾‹åŒ–å¯¹è±¡å¼•å…¥åˆ°vueç±»çš„åŸå‹ä¸Š1Vue.prototype.$store = store è¿™ä¸€ç‚¹å’Œvueæ˜¯ä¸ä¸€æ ·çš„ 2ã€vuexçš„setå’Œgetéœ€è¦è‡ªå·±å†™ï¼Œç”¨åˆ°vuex-persistedstateåº“æ¥å®ç°setå’Œget12345678910111213141516171819202122import createPersistedState from 'vuex-persistedstate'const store = new Vuex.Store(&#123; state, getters, mutations, actions, modules: &#123; &#125;, plugins: [createPersistedState(&#123; // é…ç½®ç™½åå• paths: [ 'ztInfo', 'isLogin' ], storage: &#123; getItem: key =&gt; wx.getStorageSync(key), setItem: (key, value) =&gt; wx.setStorageSync(key, value), removeItem: key =&gt; &#123;&#125; &#125; &#125;)]&#125;) åšå®Œè¿™äº›ï¼Œvuexå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨èµ·æ¥äº† 3ã€è·¯ç”±çš„ä½¿ç”¨ è¯´åˆ°è·¯ç”±ï¼Œæœ‰äººè®²åˆ°å’‹æ²¡çœ‹åˆ°vue-routerå•Šï¼Œåªèƒ½å¾ˆæŠ±æ­‰çš„è¯´ä¸€å¥ç›®å‰è¿˜æœªå¾ˆå¥½çš„æ¥å…¥vueçš„è·¯ç”±ï¼Œç°é˜¶æ®µåªèƒ½ä½¿ç”¨å°ç¨‹åºçš„è·¯ç”±é…ç½®ã€‚ å°ç¨‹åºçš„è·¯ç”±å°±éœ€è¦ç”¨åˆ°src/app.json 1234567891011121314151617181920212223242526272829&#123; "pages": [ "pages/discover/main", // é¡µé¢è·¯å¾„ ], "window": &#123; // å…¨å±€çª—å£é…ç½® "backgroundTextStyle": "light", "navigationBarBackgroundColor": "#F73C31", "navigationBarTitleText": "å±•å ‚æ‹å–", "navigationBarTextStyle": "#ffffff" &#125;, "tabBar": &#123; // åº•éƒ¨å¯¼èˆªåˆ‡æ¢ "color":"#000000", "selectedColor": "#f0220d", "list": [ &#123; "pagePath": "pages/discover/main", "text": "ç°åœºå‹˜å¯Ÿ", "iconPath": "static/images/nav_bottom2/nav_1.png", "selectedIconPath": "static/images/nav_bottom2/nav_1_on.png" &#125;, &#123; "pagePath": "pages/reservations/main", "text": "é¢„çº¦çœ‹æ ·", "iconPath": "static/images/nav_bottom2/nav_2.png", "selectedIconPath": "static/images/nav_bottom2/nav_2_on.png" &#125; ] &#125;&#125; 4ã€project.config.jsonéƒ¨åˆ†è®²è§£123456789101112131415161718192021222324252627282930313233&#123; "description": "é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚", "setting": &#123; "urlCheck": true, "es6": false, // æ˜¯å¦å°†es6è½¬æˆes5 "postcss": true, "minified": true, "newFeature": true &#125;, "miniprogramRoot": "dist/", // å°ç¨‹åºæ ¹ç›®å½• "compileType": "miniprogram", "appid": "wx86d90741d5d57774", // å°ç¨‹åºappid "projectname": "zhantang-fapai-wx-staff", // é¡¹ç›®åç§° "libVersion": "2.3.2", // ä½¿ç”¨åŸºç¡€è°ƒè¯•åº“çš„ç‰ˆæœ¬ "condition": &#123; "search": &#123; "current": -1, "list": [] &#125;, "conversation": &#123; "current": -1, "list": [] &#125;, "game": &#123; "currentL": -1, "list": [] &#125;, "miniprogram": &#123; "current": -1, "list": [] &#125; &#125;&#125; ä¸Šè¯‰æ³¨è§£çš„ä¿¡æ¯éƒ½å¯ä»¥åœ¨å°ç¨‹åºå·¥å…·ä¸­çš„è¯¦æƒ…ä¸­é…ç½® è®²è¿°äº†è¿™äº›åŸºæœ¬ä¸Šä¸€ä¸ªæ¡†æ¶ä½¿ç”¨å°±å¯ä»¥å¼€å§‹äº†ï¼Œå‰©ä¸‹çš„æ¥å£å°è£…ï¼Œstoreå®ç°å°±ä¸è¯¦ç»†è®²äº†ï¼Œæ¥å£å°è£…æˆ‘ç”¨çš„æ˜¯flyioï¼Œstoreå®ç°ä¸Šé¢ä¹Ÿè®²äº†é‡è¦çš„ç‚¹ã€‚ mpvueå¼€å‘ä¸­é‡åˆ°çš„å‘ç‚¹mpvueä¸­vueçš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€äº›ä¼šå­˜åœ¨é—®é¢˜ã€‚ vueä¸­å¯ä»¥ä½¿ç”¨filterè¿‡æ»¤ï¼Œmpvueä¸è¡Œ vueä¸­å¯ä»¥ä½¿ç”¨domä¸­methodsæ–¹æ³•è°ƒç”¨è·å–è¿”å›å€¼ï¼Œ åœ¨mpvueä¸­ä¸è¡Œï¼Œå¯ä»¥è€ƒè™‘ç”¨computedè®¡ç®—å®ç° vueä¸­å¸¸ç”¨çš„slotåœ¨mpvueä¹Ÿæˆäº†é¸¡è‚‹ åŸç”Ÿç»„ä»¶ä¸Šä¸è¦ä½¿ç”¨v-ifï¼Œä¾‹å¦‚mapå°†ä¼šå¯¼è‡´åœ°å›¾ä½ç½®ä¸åˆ·æ–°ï¼Œæ°´å°ï¼Œcanvasç»„ä»¶å°†ä¼šä¸æ›´æ–°æ•°æ®ç­‰ é‡ç‚¹è¯´ä¸‹slotæˆ‘é‡åˆ°çš„å‘ï¼Œåœ¨vueä¸­ä½¿ç”¨slotä½¿ç”¨æ˜¯å¯¹slotè¿›è¡Œå…·ååŒ¹é…ï¼Œslotä¸­çš„domä½œç”¨åŸŸæ˜¯çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸï¼Œslotä¸­ç»„ä»¶åŒæ—¶å¯ä»¥ç»§ç»­åµŒå¥—ã€‚ é‚£å†mpvueä¸­æ˜¯ä»€ä¹ˆä¸ªæ ·å­å‘¢ã€‚ã€‚ã€‚æˆ‘åªæƒ³è¯´12345678910111213141516```javascript&lt;select-city @onCityChange=&quot;onCityChange&quot; :selectAddress=&quot;selectAddress&quot;&gt; &lt;template slot=&quot;default&quot;&gt; &lt;section class=&quot;pickSection&quot;&gt; &lt;div class=&quot;picker&quot;&gt;&#123;&#123;selectAddress || &apos;åœ°åŒº&apos;&#125;&#125;&lt;/div&gt; &lt;i-icon class=&quot;iconUnfold&quot; type=&quot;unfold&quot; /&gt; &lt;/section&gt; &lt;/template&gt;&lt;/select-city&gt;```ä¸Šé¢è¿™å—ä»£ç æ˜¯mpvueä¸­æˆªå–çš„ï¼Œ&lt;select-city/&gt;æ˜¯ä¸ªåœ°å€é€‰æ‹©å™¨ç»„ä»¶ï¼ŒåŸå…ˆæˆ‘è¦å®ç°çš„åŠŸèƒ½æ˜¯ä¼ ä¸ªonCityChangeæ–¹æ³•è¿›å»å¹¶è¿”å›ç»™æˆ‘åœ°å€ä¿¡æ¯ã€‚ç„¶åå°†åœ°å€ä¿¡æ¯å­˜åˆ°selectAddresså˜é‡é‡Œï¼Œå†åˆ·æ–°åˆ°`&lt;div class=&quot;picker&quot;&gt;&#123;&#123;selectAddress || &apos;åœ°åŒº&apos;&#125;&#125;&lt;/div&gt;`è¿™é‡Œï¼Œç„¶è€Œè¿™ä¹ˆåšäº†ï¼Œç„¶å¹¶åµ æœ€åæŸ¥é˜…èµ„æ–™åæˆ‘æ‰çŸ¥é“ï¼Œmpvueä¸­çš„slotåªèƒ½ä¼ é™æ€æ•°æ®ï¼Œä¸”éœ€è¦å¯¹slotå…·åï¼ŒslotåµŒå¥—æ— æ•ˆï¼Œæ›´å°´å°¬çš„æ˜¯ï¼Œslotä¸­çš„ä½œç”¨åŸŸç«Ÿç„¶æ˜¯åœ¨å­ç»„ä»¶é‡Œã€‚æˆ‘æœ‰ç‚¹è’™ï¼Œç„¶åå°±åœ¨çˆ¶ç»„ä»¶ä¸Šä¼ é€’äº†ä¸ªselectAddress,ç„¶åæ‰èƒ½è·å–åœ°å€ä¿¡æ¯ã€‚å¯¹äºslotå¤§å®¶æåŠ›è¦æ±‚æ­¤åŠŸèƒ½å®Œå–„ä¸‹ï¼Œç›®å‰ä¸ºæ­¢è¿˜æœªå®ç° å¦‚æœåœ¨å°ç¨‹åºåŸç”Ÿç»„ä»¶ä¸Šä¾‹å¦‚mapå’Œcanvasä¸­ä½¿ç”¨v-ifï¼Œmpvueåœ¨æ”¹å˜æ•°æ®æ—¶ä¼šå‘ç°è§†å›¾å¹¶æœªåˆ·æ–°ã€‚æˆ‘é‡‡å–çš„è§£å†³æªæ–½æ˜¯å°†è§†å›¾domä¿ç•™åœ¨æ–‡æ¡£æµä¸­ï¼Œå°†ç»„ä»¶å®šä½åˆ°è§†å›¾çœ‹ä¸åˆ°çš„åœ°æ–¹ï¼Œç¬¦åˆæ¡ä»¶å†å°†ä¹‹å®šä½åˆ°éœ€è¦çš„åœ°æ–¹å³å¯ã€‚ è¿™é‡Œåªé˜è¿°æˆ‘é‡åˆ°çš„å‘~~~åç»­é‡åˆ°å°†ç»§ç»­æ›´æ–°]]></content>
      <categories>
        <category>mpvue</category>
      </categories>
      <tags>
        <tag>mpvue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reacté«˜é˜¶ç»„ä»¶(HOC)å…¥é—¨]]></title>
    <url>%2F2018%2F11%2F16%2FReact%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-HOC-%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[å‰è¨€ &nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰çš„æ–‡ç« React Mixinså…¥é—¨æŒ‡å—ä»‹ç»äº†React Mixinçš„ä½¿ç”¨ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­React Mixinçš„ä½œç”¨è¿˜æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œèƒ½å¤Ÿä½¿å¾—æˆ‘ä»¬åœ¨å¤šä¸ªç»„ä»¶ä¸­å…±ç”¨ç›¸åŒçš„æ–¹æ³•ã€‚ä½†æ˜¯å·¥ç¨‹ä¸­å¤§é‡ä½¿ç”¨Mixinä¹Ÿä¼šå¸¦æ¥éå¸¸å¤šçš„é—®é¢˜ã€‚Dan Abramovåœ¨æ–‡ç« Mixins Considered Harmfulä»‹ç»äº†Mixinå¸¦æ¥çš„ä¸€äº›é—®é¢˜,æ€»ç»“ä¸‹æ¥ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ç‚¹: ç ´åç»„ä»¶å°è£…æ€§: Mixinå¯èƒ½ä¼šå¼•å…¥ä¸å¯è§çš„å±æ€§ã€‚ä¾‹å¦‚åœ¨æ¸²æŸ“ç»„ä»¶ä¸­ä½¿ç”¨Mixinæ–¹æ³•ï¼Œç»™ç»„ä»¶å¸¦æ¥äº†ä¸å¯è§çš„å±æ€§(props)å’ŒçŠ¶æ€(state)ã€‚å¹¶ä¸”Mixinå¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤ã€‚ ä¸åŒçš„Mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª ä¸ºäº†å¤„ç†ä¸Šè¿°çš„é—®é¢˜ï¼ŒReactå®˜æ–¹æ¨èä½¿ç”¨é«˜é˜¶ç»„ä»¶(High Order Component) é«˜é˜¶ç»„ä»¶(HOC) &nbsp;&nbsp;&nbsp;&nbsp;åˆšå¼€å§‹å­¦ä¹ é«˜é˜¶ç»„ä»¶æ—¶ï¼Œè¿™ä¸ªæ¦‚å¿µå°±é€æ¼ç€é«˜çº§çš„æ°”å‘³ï¼Œçœ‹ä¸Šå»å°±åƒæ˜¯ä¸€ç§å…ˆè¿›çš„ç¼–ç¨‹æŠ€æœ¯çš„ä¸€ä¸ªæ·±å¥¥æœ¯è¯­ï¼Œæ¯•ç«Ÿåå­—é‡Œå°±æœ‰â€é«˜é˜¶â€è¿™ç§å­—çœ¼ï¼Œå®è´¨ä¸Šå¹¶ä¸æ˜¯å¦‚æ­¤ã€‚é«˜é˜¶ç»„ä»¶çš„æ¦‚å¿µåº”è¯¥æ˜¯æ¥æºäºJavaScriptçš„é«˜é˜¶å‡½æ•°: é«˜é˜¶å‡½æ•°å°±æ˜¯æ¥å—å‡½æ•°ä½œä¸ºè¾“å…¥æˆ–è€…è¾“å‡ºçš„å‡½æ•° è¿™ä¹ˆçœ‹æ¥æŸ¯é‡ŒåŒ–ä¹Ÿæ˜¯é«˜é˜¶å‡½æ•°äº†ã€‚Reactå®˜æ–¹å®šä¹‰é«˜é˜¶ç»„ä»¶çš„æ¦‚å¿µæ˜¯: A higher-order component is a function that takes a component and returns a new component. &nbsp;&nbsp;&nbsp;&nbsp;(å‚ç…§ç¿»è¯‘äº†Reactå®˜æ–¹æ–‡æ¡£çš„Advanced Guideséƒ¨åˆ†ï¼Œå®˜æ–¹çš„é«˜é˜¶ç»„ä»¶ä¸­æ–‡æ–‡æ¡£æˆ³è¿™é‡Œ) &nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¹ˆçœ‹æ¥ï¼Œé«˜é˜¶ç»„ä»¶ä»…ä»…åªæ˜¯æ˜¯ä¸€ä¸ªæ¥å—ç»„ä»¶ç»„ä½œè¾“å…¥å¹¶è¿”å›ç»„ä»¶çš„å‡½æ•°ã€‚çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆï¼Œé‚£ä¹ˆé«˜é˜¶ç»„ä»¶èƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆçœ‹ä¸€ä¸‹é«˜é˜¶ç»„ä»¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®ç°é«˜é˜¶ç»„ä»¶çš„æ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§: å±æ€§ä»£ç†(Props Proxy) åå‘ç»§æ‰¿(Inheritance Inversion) å±æ€§ä»£ç†&nbsp;&nbsp;&nbsp;&nbsp;åˆæ˜¯ä¸€ä¸ªå¬èµ·æ¥å¾ˆé«˜å¤§ä¸Šçš„åè¯ï¼Œå®è´¨ä¸Šæ˜¯é€šè¿‡åŒ…è£¹åŸæ¥çš„ç»„ä»¶æ¥æ“ä½œpropsï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­: 123456789101112131415161718import React, &#123; Component &#125; from 'React';//é«˜é˜¶ç»„ä»¶å®šä¹‰const HOC = (WrappedComponent) =&gt; class WrapperComponent extends Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt;; &#125;&#125;//æ™®é€šçš„ç»„ä»¶class WrappedComponent extends Component&#123; render()&#123; //.... &#125;&#125;//é«˜é˜¶ç»„ä»¶ä½¿ç”¨export default HOC(WrappedComponent) &nbsp;&nbsp;&nbsp;&nbsp;ä¸Šé¢çš„ä¾‹å­éå¸¸ç®€å•ï¼Œä½†è¶³ä»¥è¯´æ˜é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥çœ‹è§å‡½æ•°HOCè¿”å›äº†æ–°çš„ç»„ä»¶(WrapperComponent)ï¼Œè¿™ä¸ªç»„ä»¶åŸå°ä¸åŠ¨çš„è¿”å›ä½œä¸ºå‚æ•°çš„ç»„ä»¶(ä¹Ÿå°±æ˜¯è¢«åŒ…è£¹çš„ç»„ä»¶:WrappedComponent)ï¼Œå¹¶å°†ä¼ ç»™å®ƒçš„å‚æ•°(props)å…¨éƒ¨ä¼ é€’ç»™è¢«åŒ…è£¹çš„ç»„ä»¶(WrappedComponent)ã€‚è¿™ä¹ˆçœ‹èµ·æ¥å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå…¶å®å±æ€§ä»£ç†çš„ä½œç”¨è¿˜æ˜¯éå¸¸å¼ºå¤§çš„ã€‚ æ“ä½œprops &nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬çœ‹åˆ°ä¹‹å‰è¦ä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶WrappedComponentçš„å±æ€§é¦–å…ˆä¼ é€’ç»™äº†é«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶(WrapperComponent)ï¼Œè¿™æ ·æˆ‘ä»¬å°±è·å¾—äº†propsçš„æ§åˆ¶æƒ(è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•å«åšå±æ€§ä»£ç†)ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦å¯¹ä¼ å…¥çš„propsè¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹(å½“ç„¶ä¿®æ”¹å¸¦æ¥çš„é£é™©éœ€è¦ä½ è‡ªå·±æ¥æ§åˆ¶)ï¼Œä¸¾ä¸ªä¾‹å­: 123456789101112const HOC = (WrappedComponent) =&gt; class WrapperComponent extends Component &#123; render() &#123; const newProps = &#123; name: 'HOC' &#125; return &lt;WrappedComponent &#123;...this.props&#125; &#123;...newProps&#125; /&gt;; &#125; &#125; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ºè¢«åŒ…è£¹ç»„ä»¶(WrappedComponent)æ–°å¢åŠ äº†å›ºå®šçš„nameå±æ€§ï¼Œå› æ­¤WrappedComponentç»„ä»¶ä¸­å°±ä¼šå¤šä¸€ä¸ªnameçš„å±æ€§ã€‚ è·å¾—refsçš„å¼•ç”¨&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬åœ¨å±æ€§ä»£ç†ä¸­ï¼Œå¯ä»¥è½»æ¾çš„æ‹¿åˆ°è¢«åŒ…è£¹çš„ç»„ä»¶çš„å®ä¾‹å¼•ç”¨(ref)ï¼Œä¾‹å¦‚: 1234567891011121314import React, &#123; Component &#125; from 'React'; const HOC = (WrappedComponent) =&gt; class wrapperComponent extends Component &#123; storeRef(ref) &#123; this.ref = ref; &#125; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; ref = &#123;::this.storeRef&#125; /&gt;; &#125; &#125; &nbsp;&nbsp;&nbsp;&nbsp;ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒwrapperComponentæ¸²æŸ“æ¥å—åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°WrappedComponentç»„ä»¶çš„å®ä¾‹ï¼Œè¿›è€Œå®ç°è°ƒç”¨å®ä¾‹æ–¹æ³•çš„æ“ä½œ(å½“ç„¶è¿™æ ·ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯åæ¨¡å¼çš„ï¼Œä¸æ˜¯éå¸¸çš„æ¨è)ã€‚ æŠ½è±¡state&nbsp;&nbsp;&nbsp;&nbsp;å±æ€§ä»£ç†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¢«åŒ…è£¹ç»„ä»¶(WrappedComponent)ä¸­çš„çŠ¶æ€æåˆ°åŒ…è£¹ç»„ä»¶ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„ä¾‹å­å°±æ˜¯å®ç°ä¸å—æ§ç»„ä»¶åˆ°å—æ§çš„ç»„ä»¶çš„è½¬å˜(å…³äºä¸å—æ§ç»„ä»¶å’Œå—æ§ç»„ä»¶æˆ³è¿™é‡Œ) 123456789101112131415161718192021222324252627282930313233class WrappedComponent extends Component &#123; render() &#123; return &lt;input name="name" &#123;...this.props.name&#125; /&gt;; &#125;&#125;const HOC = (WrappedComponent) =&gt; class extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; name: '', &#125;; this.onNameChange = this.onNameChange.bind(this); &#125; onNameChange(event) &#123; this.setState(&#123; name: event.target.value, &#125;) &#125; render() &#123; const newProps = &#123; name: &#123; value: this.state.name, onChange: this.onNameChange, &#125;, &#125; return &lt;WrappedComponent &#123;...this.props&#125; &#123;...newProps&#125; /&gt;; &#125; &#125; &nbsp;&nbsp;&nbsp;&nbsp;ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼Œæˆ‘ä»¬å°†ä¸å—æ§ç»„ä»¶(WrappedComponent)æˆåŠŸçš„è½¬å˜ä¸ºå—æ§ç»„ä»¶. ç”¨å…¶ä»–å…ƒç´ åŒ…è£¹ç»„ä»¶&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»ä¼¼: 12345render()&#123; &lt;div&gt; &lt;WrappedComponent &#123;...this.props&#125; /&gt; &lt;/div&gt;&#125; &nbsp;&nbsp;&nbsp;&nbsp;è¿™ç§æ–¹å¼å°†è¢«åŒ…è£¹ç»„ä»¶åŒ…è£¹èµ·æ¥ï¼Œæ¥å®ç°å¸ƒå±€æˆ–è€…æ˜¯æ ·å¼çš„ç›®çš„ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;åœ¨å±æ€§ä»£ç†è¿™ç§æ–¹å¼å®ç°çš„é«˜é˜¶ç»„ä»¶ï¼Œä»¥ä¸Šè¿°ä¸ºä¾‹ï¼Œç»„ä»¶çš„æ¸²æŸ“é¡ºåºæ˜¯: å…ˆWrappedComponentå†WrapperComponent(æ‰§è¡ŒComponentDidMountçš„æ—¶é—´)ã€‚è€Œå¸è½½çš„é¡ºåºæ˜¯å…ˆWrapperComponentå†WrappedComponent(æ‰§è¡ŒComponentWillUnmountçš„æ—¶é—´)ã€‚ åå‘ç»§æ‰¿&nbsp;&nbsp;&nbsp;&nbsp;åå‘ç»§æ‰¿æ˜¯æŒ‡è¿”å›çš„ç»„ä»¶å»ç»§æ‰¿ä¹‹å‰çš„ç»„ä»¶(è¿™é‡Œéƒ½ç”¨WrappedComponentä»£æŒ‡) 123456const HOC = (WrappedComponent) =&gt; class extends WrappedComponent &#123; render() &#123; return super.render(); &#125; &#125; &nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬å¯ä»¥çœ‹è§è¿”å›çš„ç»„ä»¶ç¡®å®éƒ½ç»§æ‰¿è‡ªWrappedComponent,é‚£ä¹ˆæ‰€æœ‰çš„è°ƒç”¨å°†æ˜¯åå‘è°ƒç”¨çš„(ä¾‹å¦‚:super.render())ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå«åšåå‘ç»§æ‰¿ã€‚ æ¸²æŸ“åŠ«æŒ&nbsp;&nbsp;&nbsp;&nbsp;æ¸²æŸ“åŠ«æŒæ˜¯æŒ‡æˆ‘ä»¬å¯ä»¥æœ‰æ„è¯†åœ°æ§åˆ¶WrappedComponentçš„æ¸²æŸ“è¿‡ç¨‹ï¼Œä»è€Œæ§åˆ¶æ¸²æŸ“æ§åˆ¶çš„ç»“æœã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éƒ¨åˆ†å‚æ•°å»å†³å®šæ˜¯å¦æ¸²æŸ“ç»„ä»¶: 12345678910const HOC = (WrappedComponent) =&gt; class extends WrappedComponent &#123; render() &#123; if (this.props.isRender) &#123; return super.render(); &#125; else &#123; return null; &#125; &#125; &#125; &nbsp;&nbsp;&nbsp;&nbsp;ç”šè‡³æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¿®æ”¹renderçš„ç»“æœ: 123456789101112131415161718192021222324//ä¾‹å­æ¥æºäºã€Šæ·±å…¥ReactæŠ€æœ¯æ ˆã€‹const HOC = (WrappedComponent) =&gt; class extends WrappedComponent &#123; render() &#123; const elementsTree = super.render(); let newProps = &#123;&#125;; if (elementsTree &amp;&amp; elementsTree.type === 'input') &#123; newProps = &#123;value: 'may the force be with you'&#125;; &#125; const props = Object.assign(&#123;&#125;, elementsTree.props, newProps); const newElementsTree = React.cloneElement(elementsTree, props, elementsTree.props.children); return newElementsTree; &#125;&#125;class WrappedComponent extends Component&#123; render()&#123; return( &lt;input value=&#123;'Hello World'&#125; /&gt; ) &#125;&#125;export default HOC(WrappedComponent)//å®é™…æ˜¾ç¤ºçš„æ•ˆæœæ˜¯inputçš„å€¼ä¸º"may the force be with you" &nbsp;&nbsp;&nbsp;&nbsp;ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å°†WrappedComponentä¸­çš„inputå…ƒç´ valueå€¼ä¿®æ”¹ä¸º:may the force be with youã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‰åelementTreeçš„åŒºåˆ«:elementsTree: &nbsp;&nbsp;&nbsp;&nbsp;newElementsTree: &nbsp;&nbsp;&nbsp;&nbsp;åœ¨åå‘ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšéå¸¸å¤šçš„æ“ä½œï¼Œä¿®æ”¹stateã€propsç”šè‡³æ˜¯ç¿»è½¬Element Treeã€‚åå‘ç»§æ‰¿æœ‰ä¸€ä¸ªé‡è¦çš„ç‚¹: åå‘ç»§æ‰¿ä¸èƒ½ä¿è¯å®Œæ•´çš„å­ç»„ä»¶æ ‘è¢«è§£æï¼Œå¼€å§‹æˆ‘å¯¹è¿™ä¸ªæ¦‚å¿µä¹Ÿä¸ç†è§£ï¼Œåæ¥åœ¨çœ‹äº†React Components, Elements, and Instancesè¿™ç¯‡æ–‡ç« ä¹‹åå¯¹è¿™ä¸ªæ¦‚å¿µæœ‰äº†è‡ªå·±çš„ä¸€ç‚¹ä½“ä¼šã€‚React Components, Elements, and Instancesè¿™ç¯‡æ–‡ç« ä¸»è¦æ˜ç¡®äº†ä¸€ä¸‹å‡ ä¸ªç‚¹: &nbsp;&nbsp;&nbsp;&nbsp; + å…ƒç´ (element)æ˜¯ä¸€ä¸ªæ˜¯ç”¨DOMèŠ‚ç‚¹æˆ–è€…ç»„ä»¶æ¥æè¿°å±å¹•æ˜¾ç¤ºçš„çº¯å¯¹è±¡ï¼Œå…ƒç´ å¯ä»¥åœ¨å±æ€§(props.children)ä¸­åŒ…å«å…¶ä»–çš„å…ƒç´ ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸ä¼šæ”¹å˜ã€‚æˆ‘ä»¬é€šè¿‡JSXå’ŒReact.createClassåˆ›å»ºçš„éƒ½æ˜¯å…ƒç´ ã€‚&nbsp;&nbsp;&nbsp;&nbsp; + ç»„ä»¶(component)å¯ä»¥æ¥å—å±æ€§(props)ä½œä¸ºè¾“å…¥ï¼Œç„¶åè¿”å›ä¸€ä¸ªå…ƒç´ æ ‘(element tree)ä½œä¸ºè¾“å‡ºã€‚æœ‰å¤šç§å®ç°æ–¹å¼:Classæˆ–è€…å‡½æ•°(Function)ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;æ‰€ä»¥ï¼Œåå‘ç»§æ‰¿ä¸èƒ½ä¿è¯å®Œæ•´çš„å­ç»„ä»¶æ ‘è¢«è§£æçš„æ„æ€çš„è§£æçš„å…ƒç´ æ ‘ä¸­åŒ…å«äº†ç»„ä»¶(å‡½æ•°ç±»å‹æˆ–è€…Classç±»å‹)ï¼Œå°±ä¸èƒ½å†æ“ä½œç»„ä»¶çš„å­ç»„ä»¶äº†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä¸èƒ½å®Œå…¨è§£æã€‚ä¸¾ä¸ªä¾‹å­: 123456789101112131415161718192021222324252627282930313233343536373839404142import React, &#123; Component &#125; from 'react';const MyFuncComponent = (props)=&gt;&#123; return ( &lt;div&gt;Hello World&lt;/div&gt; );&#125;class MyClassComponent extends Component&#123; render()&#123; return ( &lt;div&gt;Hello World&lt;/div&gt; ) &#125;&#125;class WrappedComponent extends Component&#123; render()&#123; return( &lt;div&gt; &lt;div&gt; &lt;span&gt;Hello World&lt;/span&gt; &lt;/div&gt; &lt;MyFuncComponent /&gt; &lt;MyClassComponent /&gt; &lt;/div&gt; ) &#125;&#125;const HOC = (WrappedComponent) =&gt; class extends WrappedComponent &#123; render() &#123; const elementsTree = super.render(); return elementsTree; &#125; &#125;export default HOC(WrappedComponent); &nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è§£æçš„å…ƒç´ æ ‘(element tree)ï¼Œdivä¸‹çš„spanæ˜¯å¯ä»¥è¢«å®Œå…¨è¢«è§£æçš„ï¼Œä½†æ˜¯MyFuncComponentå’ŒMyClassComponentéƒ½æ˜¯ç»„ä»¶ç±»å‹çš„ï¼Œå…¶å­ç»„ä»¶å°±ä¸èƒ½è¢«å®Œå…¨è§£æäº†ã€‚ æ“ä½œpropså’Œstate&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ä¸Šé¢çš„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè§£æçš„å…ƒç´ æ ‘(element tree)ä¸­å«æœ‰propså’Œstate(ä¾‹å­çš„ç»„ä»¶ä¸­æ²¡æœ‰state),ä»¥åŠrefå’Œkeyç­‰å€¼ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥è¯»å–propså’Œstate,ç”šè‡³å¯ä»¥ä¿®æ”¹å¢åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸ºé«˜é˜¶å±æ€§ä¼ å…¥ä¸€äº›å‚æ•°ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æŸ¯é‡ŒåŒ–çš„å½¢å¼ä¼ å…¥å‚æ•°ï¼Œä¾‹å¦‚: 123456789101112import React, &#123; Component &#125; from 'React';const HOCFactoryFactory = (...params) =&gt; &#123; // å¯ä»¥åšä¸€äº›æ”¹å˜ params çš„äº‹ return (WrappedComponent) =&gt; &#123; return class HOC extends Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt;; &#125; &#125; &#125;&#125; &nbsp;&nbsp;&nbsp;&nbsp;å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼ä½¿ç”¨: 1HOCFactoryFactory(params)(WrappedComponent) &nbsp;&nbsp;&nbsp;&nbsp;è¿™ç§æ–¹å¼æ˜¯ä¸æ˜¯éå¸¸ç±»ä¼¼äºReact-Reduxåº“ä¸­çš„connectå‡½æ•°ï¼Œå› ä¸ºconnectä¹Ÿæ˜¯ç±»ä¼¼çš„ä¸€ç§é«˜é˜¶å‡½æ•°ã€‚åå‘ç»§æ‰¿ä¸åŒäºå±æ€§ä»£ç†çš„è°ƒç”¨é¡ºåºï¼Œç»„ä»¶çš„æ¸²æŸ“é¡ºåºæ˜¯: å…ˆWrappedComponentå†WrapperComponent(æ‰§è¡ŒComponentDidMountçš„æ—¶é—´)ã€‚è€Œå¸è½½çš„é¡ºåºä¹Ÿæ˜¯å…ˆWrappedComponentå†WrapperComponent(æ‰§è¡ŒComponentWillUnmountçš„æ—¶é—´)ã€‚ HOCå’ŒMixinçš„æ¯”è¾ƒ&nbsp;&nbsp;&nbsp;&nbsp;å€Ÿç”¨ã€Šæ·±å…¥ReactæŠ€æœ¯æ ˆã€‹ä¸€ä¹¦ä¸­çš„å›¾: &nbsp;&nbsp;&nbsp;&nbsp;é«˜é˜¶ç»„ä»¶å±äºå‡½æ•°å¼ç¼–ç¨‹(functional programming)æ€æƒ³ï¼Œå¯¹äºè¢«åŒ…è£¹çš„ç»„ä»¶æ—¶ä¸ä¼šæ„ŸçŸ¥åˆ°é«˜é˜¶ç»„ä»¶çš„å­˜åœ¨ï¼Œè€Œé«˜é˜¶ç»„ä»¶è¿”å›çš„ç»„ä»¶ä¼šåœ¨åŸæ¥çš„ç»„ä»¶ä¹‹ä¸Šå…·æœ‰åŠŸèƒ½å¢å¼ºçš„æ•ˆæœã€‚è€ŒMixinè¿™ç§æ··å…¥çš„æ¨¡å¼ï¼Œä¼šç»™ç»„ä»¶ä¸æ–­å¢åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ï¼Œç»„ä»¶æœ¬èº«ä¸ä»…å¯ä»¥æ„ŸçŸ¥ï¼Œç”šè‡³éœ€è¦åšç›¸å…³çš„å¤„ç†(ä¾‹å¦‚å‘½åå†²çªã€çŠ¶æ€ç»´æŠ¤)ï¼Œä¸€æ—¦æ··å…¥çš„æ¨¡å—å˜å¤šæ—¶ï¼Œæ•´ä¸ªç»„ä»¶å°±å˜çš„éš¾ä»¥ç»´æŠ¤ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¦‚æ­¤å¤šçš„Reactåº“éƒ½é‡‡ç”¨é«˜é˜¶ç»„ä»¶çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[markdownåŸºç¡€è¯­æ³•]]></title>
    <url>%2F2018%2F11%2F16%2Fmarkdown%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[1. markdownæ˜¯ä»€ä¹ˆï¼Ÿ Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒä»¥çº¯æ–‡æœ¬å½¢å¼(æ˜“è¯»ã€æ˜“å†™ã€æ˜“æ›´æ”¹)ç¼–å†™æ–‡æ¡£ï¼Œå¹¶æœ€ç»ˆä»¥HTMLæ ¼å¼å‘å¸ƒã€‚Markdownä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†ä»¥MARKDOWNè¯­è¨€ç¼–å†™çš„è¯­è¨€è½¬æ¢æˆHTMLå†…å®¹çš„å·¥å…·ï¼Œæœ€åˆæ˜¯ä¸€ä¸ªperlè„šæœ¬Markdown.plã€‚ 2. markdownè¯­æ³•2.1 æ ‡é¢˜æ ‡é¢˜æœ‰ä¸¤ç§å½¢å¼ï¼š(1) ç¬¬ä¸€ç§æ˜¯ç”¨=æˆ–è€…-è¡¨ç¤ºä¸€çº§æˆ–è€…äºŒçº§æ ‡é¢˜ ä¸€çº§æ ‡é¢˜======äºŒçº§æ ‡é¢˜------ æ•ˆæœå¦‚ä¸‹ï¼š ä¸€çº§æ ‡é¢˜downäºŒçº§æ ‡é¢˜ (2) ç¬¬äºŒç§å°±æ˜¯#æ¥è¡¨ç¤º1-6çº§æ ‡é¢˜ï¼Œä¸HTMLçš„h1-h6ç›¸ä¼¼ã€‚ 123456&gt; #ä¸€çº§æ ‡é¢˜&gt; ##äºŒçº§æ ‡é¢˜&gt; ###ä¸‰çº§æ ‡é¢˜&gt; ####å››çº§æ ‡é¢˜&gt; #####äº”çº§æ ‡é¢˜&gt; ######å…­çº§æ ‡é¢˜ æ•ˆæœå¦‚ä¸‹ï¼š ä¸€çº§æ ‡é¢˜äºŒçº§æ ‡é¢˜ä¸‰çº§æ ‡é¢˜å››çº§æ ‡é¢˜äº”çº§æ ‡é¢˜å…­çº§æ ‡é¢˜2.2 å¼•ç”¨åœ¨æ®µè½çš„æ¯è¡Œæˆ–è€…åªåœ¨ç¬¬ä¸€è¡Œä½¿ç”¨ç¬¦å·&gt;,è¿˜å¯ä½¿ç”¨å¤šä¸ªåµŒå¥—å¼•ç”¨ï¼Œå¦‚ï¼š >å¼•ç”¨ >>åµŒå¥—å¼•ç”¨ æ•ˆæœå¦‚ä¸‹ï¼š å¼•ç”¨ åµŒå¥—å¼•ç”¨ 2.3 ä»£ç å—ä»£ç å—å¯ä»¥åœ¨æ¯è¡ŒåŠ ä¸Šå››ä¸ªç©ºæ ¼æ¥è¡¨ç¤ºä»£ç åŒºåŸŸï¼Œæ•ˆæœå¦‚ï¼š function foo(){ return; } æˆ–è€…åœ¨å¼€å§‹ä¸ç»“å°¾ç”¨è¡¨ç¤ºä¸€æ ·å¯ä»¥ï¼Œæ•ˆæœåŒä¸Šï¼š 123&gt; function foo()&#123;&gt; return;&gt; &#125; 2.4 ``ç¬¦å·``å¯ä»¥ç”¨æ¥è¡¨ç¤ºç›¸å¯¹è¾ƒå°åŒºåŸŸçš„ä»£ç å†…å®¹ï¼Œæˆ–è€…èµ·åˆ°æ ‡è®°ä½œç”¨ï¼Œå¦‚ `æ ‡è®°` æ•ˆæœå¦‚ä¸‹ï¼š æ ‡è®° 2.5 å¼ºè°ƒä¸æ–œä½“åœ¨å¼ºè°ƒå†…å®¹ä¸¤ä¾§åˆ†åˆ«åŠ ä¸Š*æˆ–è€…_ï¼Œå¦‚ï¼š *æ–œä½“ï¼Œ_æ–œä½“_**ç²—ä½“**ï¼Œ__ç²—ä½“__ æ•ˆæœå¦‚ä¸‹ï¼š æ–œä½“ï¼Œæ–œä½“ç²—ä½“ï¼Œç²—ä½“ 2.6 æœ‰åºåˆ—è¡¨ä¸æ— åºåˆ—è¡¨ä½¿ç”¨*ã€+ã€æˆ–-æ ‡è®°æ— åºåˆ—è¡¨ï¼Œå¦‚ï¼š (+-) ç¬¬ä¸€é¡¹ (+-) ç¬¬äºŒé¡¹*(+-) ç¬¬ä¸‰é¡¹ æ•ˆæœå¦‚ä¸‹ï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ ä½¿ç”¨æ•°å­—123åŠ ä¸Š.å³æ˜¯æœ‰åºåˆ—è¡¨ï¼Œå¦‚ï¼š ç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬ä¸‰é¡¹ æ•ˆæœå¦‚ä¸‹ï¼š 1.ç¬¬ä¸€é¡¹2.ç¬¬äºŒé¡¹3.ç¬¬ä¸‰é¡¹ 2.7 åˆ†å‰²çº¿åˆ†å‰²çº¿æœ€å¸¸ä½¿ç”¨å°±æ˜¯ä¸‰ä¸ªæˆ–ä»¥ä¸Š*ï¼Œè¿˜å¯ä»¥ä½¿ç”¨-å’Œ_ï¼Œå¦‚ï¼š æˆ‘æ˜¯åˆ†å‰²çº¿1***æˆ‘æ˜¯åˆ†å‰²çº¿2â€”â€”â€”æˆ‘æ˜¯åˆ†å‰²çº¿3___ æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘æ˜¯åˆ†å‰²çº¿1 æˆ‘æ˜¯åˆ†å‰²çº¿2æˆ‘æ˜¯åˆ†å‰²çº¿3 2.8 é“¾æ¥é“¾æ¥ç”±[]ä¸()ç»„æˆï¼Œ[]ä¸­çš„æŒ‡æè¿°ï¼Œ()ä¸­è·Ÿé“¾æ¥åœ°å€ï¼Œå¦‚ï¼š [ç™¾åº¦](https://www.baidu.com/) æ•ˆæœå¦‚ä¸‹ï¼š ç™¾åº¦ 2.9 å›¾ç‰‡å¼•å…¥ ![å›¾ç‰‡](å›¾ç‰‡åœ°å€) æ•ˆæœå¦‚ä¸‹ 2.9 è¡¨æ ¼å†™æ³• 1234First Header | Second Header | Third Header------------ | ------------- | ------------Content Cell | Content Cell | Content CellContent Cell | Content Cell | Content Cell åœ¨ Markdown ä¸­ï¼Œå¯ä»¥åˆ¶ä½œè¡¨æ ¼ï¼Œä¾‹å¦‚ï¼š First Header Second Header Third Header Content Cell Content Cell Content Cell Content Cell Content Cell Content Cell]]></content>
      <categories>
        <category>å·¥å…·ç±»</category>
      </categories>
      <tags>
        <tag>å·¥å…·ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RSAåŠ è§£å¯†ç­¾åç”¨æ³•]]></title>
    <url>%2F2017%2F08%2F11%2FRSA%E5%8A%A0%E8%A7%A3%E5%AF%86%E7%AD%BE%E5%90%8D%E7%94%A8%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å‰è¨€éå¯¹ç§°åŠ å¯†æŠ€æœ¯æ˜¯ä¿è¯æˆ‘ä»¬ä¿¡æ¯å®‰å…¨éå¸¸é‡è¦çš„æŠ€æœ¯ã€‚ RSAä¾¿æ˜¯å…¶ä¸­ç¿˜æ¥šï¼Œ åº”ç”¨å¹¿æ³›ã€‚æœ¬æ–‡ä»…ä»å®ç”¨çš„è§’åº¦ï¼Œ æ€»ç»“ä¸€ä¸‹jsè¯­è¨€ä¸­ï¼Œ RSAåŠ è§£å¯†å’Œç­¾ååŠ è§£å¯†çš„å®ç°ã€‚ åˆ†äº«ä¸¤ä¸ªåº“ï¼Œéƒ½æ˜¯ç”¨æ¥åŠ è§£å¯†çš„ï¼Œhttps://github.com/kjur/jsrsasign https://github.com/travist/jsencryptç”±äºjsrsasignåº“åŠ å¯†ä¸šåŠ¡æ•°æ®æ€»æ˜¯å‡ºç°æŠ¥é”™ï¼Œä¹‹åå°±ç”¨äº†jsencryptæ¥å®ç°äº†ä¸šåŠ¡æ•°æ®çš„åŠ å¯†ï¼Œå†é€šè¿‡jsrsasignæ¥å®ç°ç­¾åä»¥åŠç­¾åæ ¡éªŒ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“åŠ å¯†è§£å¯†çš„å®ç°ï¼Œè¦æ˜ç™½æ€ä¹ˆå»åŠ å¯†ï¼Œåˆæ€ä¹ˆå»è§£å¯†ï¼Œè¿™ä¸ªåœ°æ–¹å°±è¦æ±‚æˆ‘ä»¬çŸ¥é“éå¯¹ç§°å¯†é’¥å¯¹çš„æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯å¯†é’¥å¯¹ï¼Œå°±æ˜¯åŒæ–¹ä¹‹é—´äº’ç›¸æä¾›å…¬é’¥æ¥å®ç°åŠ å¯†è§£å¯†ç”¨çš„å¯†ç  ï¼Œå®ç°åŠ è§£å¯†è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š ï¼ˆ1ï¼‰ä¹™æ–¹ç”Ÿæˆä¸¤æŠŠå¯†é’¥ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ã€‚å…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—ï¼Œç§é’¥åˆ™æ˜¯ä¿å¯†çš„ã€‚ ï¼ˆ2ï¼‰ç”²æ–¹è·å–ä¹™æ–¹çš„å…¬é’¥ï¼Œç„¶åç”¨å®ƒå¯¹ä¿¡æ¯åŠ å¯†ã€‚ ï¼ˆ3ï¼‰ä¹™æ–¹å¾—åˆ°åŠ å¯†åçš„ä¿¡æ¯ï¼Œç”¨ç§é’¥è§£å¯†ã€‚ 12345678910111213141516171819export const encryptMethod = (bussinessParams: Object) =&gt; &#123; try &#123; //è¿™éƒ¨åˆ†æ˜¯åŠ å¯†ä¸šåŠ¡æ•°æ®çš„æ–¹æ³• const encrypt = new JSEncrypt() encrypt.setPublicKey(publicKey) const encrypted = encrypt.encrypt(encodeURIComponent( JSON.stringify(bussinessParams))) console.log("å…¬é’¥åŠ å¯†åï¼ŒåŸæ–‡ : " + encrypted); return encrypted // ç§é’¥è§£å¯† var decrypt = new JSEncrypt(); decrypt.setPrivateKey(privKey); console.log("å…¬é’¥åŠ å¯†å¯†æ–‡ : " + encrypted); var uncrypted = decrypt.decrypt(encrypted); console.log("ç§é’¥è§£å¯†åï¼ŒåŸæ–‡ : " + uncrypted); &#125; catch (e) &#123; Alert.alert(`RSA $&#123;e&#125;`) &#125;&#125; ä¸Šé¢è¯‰è¯´çš„æ˜¯ä¸šåŠ¡æ•°æ®çš„åŠ å¯† æˆ‘ä»¬åŠ å¯†å®Œä¸šåŠ¡æ•°æ®ä¿¡æ¯è¿˜æƒ³è¦ä¸€ç§ä¸œè¥¿æ¥éªŒè¯æˆ‘çš„ä¸šåŠ¡æ•°æ®æ˜¯å¦è¢«ä¸²æ”¹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç­¾åçš„æ–¹æ³•æ¥å®ç°éªŒè¯æ˜¯å¦ä¸²æ”¹ä¿¡æ¯ï¼Œç­¾åæ˜¯éœ€è¦æ‹¿å·±æ–¹ç§é’¥å¯¹åŠ å¯†è¿‡çš„ä¸šåŠ¡æ•°æ®è¿›è¡Œç­¾åï¼Œ ç­¾å®Œåä¹‹åæŠŠåŠ å¯†æ•°æ®å’Œç­¾åä¸²éƒ½ä¼ ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹ç”¨å·±æ–¹æä¾›çš„å…¬é’¥è¿›è¡Œç­¾åçš„æ ¡éªŒï¼Œç›´æ¥ä¸Šä»£ç  1234567891011121314151617export const sign = () =&gt; &#123; try &#123; const sig = new KJUR.crypto.Signature(&#123; alg: 'SHA1withRSA' &#125;) sig.init(privateKey) sig.updateString(encrypted)//æ­¤å¤„encryptedæ˜¯åŠ å¯†çš„ä¸šåŠ¡æ•°æ® const hSigVal = encodeURIComponent(sig.sign()) const sig1 = new KJUR.crypto.Signature(&#123; alg: 'SHA1withRSA' &#125;) sig1.init(publicKey)//æ­¤å¤„éœ€è¦å…¬é’¥å»å¯¹ç­¾åè¿›è¡Œæ ¡éªŒ sig1.updateString(encrypted) const verified = sig1.verify(hSigVal) console.log("ç­¾åæ ¡éªŒåç»“æœ : " + verified); &#125; catch (e) &#123; Alert.alert(`RSA $&#123;e&#125;`) &#125;&#125; ä»¥ä¸‹æ˜¯ç­¾åçš„apiæ–‡æ¡£ï¼šhttps://kjur.github.io/jsrsasign/api/symbols/KJUR.crypto.Signature.htmlç­¾åæ ¡éªŒçš„demoï¼šhttps://kjur.github.io/jsrsasign/sample/sample-rsasign.htmlå‘½ä»¤ç”Ÿæˆå¯†é’¥æ–‡æ¡£ï¼šhttp://www.cnblogs.com/littleatp/p/5878763.html JavaScript RSA è¶…é•¿å­—ç¬¦åŠ è§£å¯†åˆšåˆšæ¥è§¦åˆ°RSAå½“æ—¶ä¸äº†è§£ï¼ŒRSAåŠ è§£å¯†æ˜¯æœ‰å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶çš„ï¼ŒåŠ å¯†æœ€å¤§å­—ç¬¦é•¿åº¦æ˜¯117ä½ï¼Œè§£å¯†æœ€å¤§é•¿åº¦æ˜¯128ä½ã€‚ ç”¨åˆ°çš„JSåº“JSEncrypt,åˆšå¼€å§‹æ‰¾äº†å¥½å‡ ä¸ª,å‘ç°å°±è¿™ä¸ªå¥½ç”¨ä¸€äº›,æ¢å›æ¥äº†(é€”ä¸­é‡åˆ°å¾ˆå¤šå‘ï¼Œä¸€æ­¥ä¸€ä¸ªå‘è¿‡æ¥çš„)ã€‚ è¿™ä¸ªåº“çš„ç¼ºé™·ï¼šæ²¡æ³•ç”¨å…¬é’¥è§£å¯†åªèƒ½åŠ å¯†ï¼Œç§é’¥æ²¡æ³•åŠ å¯†åªèƒ½ åˆ†æ®µåŠ å¯†æ–¹æ³•ï¼š123456789101112131415161718192021222324// The right encryption codeJSEncrypt.prototype.encryptLong = function(string) &#123; var k = this.getKey(); var maxLength = (((k.n.bitLength()+7)&gt;&gt;3)-11);//æ­¤å¤„æ˜¯ç®—æ³•æ¥ç®—å‡ºä½ çš„å¯†é’¥å¯ä»¥æ”¯æŒçš„æœ€å¤§åŠ å¯†å­—ç¬¦ä¸²é•¿åº¦ try &#123; var lt = ""; var ct = ""; if (string.length &gt; maxLength) &#123; lt = string.match(/.&#123;1,117&#125;/g); lt.forEach(function(entry) &#123; var t1 = k.encrypt(entry); ct += t1 ; &#125;); return hex2b64(ct); &#125; var t = k.encrypt(string); var y = hex2b64(t); return y; &#125; catch (ex) &#123; return false; &#125;&#125;; åˆ†æ®µè§£å¯†æ–¹æ³•ï¼š1234567891011121314151617181920// The error decryption codeJSEncrypt.prototype.decryptLong = function(string) &#123; var k = this.getKey(); var maxLength = ((k.n.bitLength()+7)&gt;&gt;3); try &#123; var string = b64tohex(string); var ct = ""; if (string.length &gt; maxLength) &#123; var lt = string.match(/.&#123;1,128&#125;/g); lt.forEach(function(entry) &#123; var t1 = k.decrypt(entry); ct += t1; &#125;); &#125; var y = k.decrypt(b64tohex(string)); return y; &#125; catch (ex) &#123; return false; &#125;&#125;; æ­¤ç¯‡æ–‡ç« åªæ˜¯ä¸ªäººåœ¨ä½¿ç”¨è¿™ä¸¤ä¸ªåº“ä¸­çš„ä½¿ç”¨çš„æ„Ÿå—ï¼Œjsencryptå¯ä»¥åŠ è§£å¯†ä½†æ˜¯ä¸å­˜åœ¨ç­¾åæ–¹æ³•ï¼Œ jsrsasignå¯ä»¥ç­¾åï¼Œä½†æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­åŠ å¯†æ–¹æ³•æŠ¥é”™ã€‚åˆæ¬¡å†™æ–‡ç« ï¼Œä¸åˆ°ä¹‹å¤„è¿˜è¯·è½»å–·ï¼ï¼ï¼]]></content>
      <categories>
        <category>å·¥å…·ç±»</category>
      </categories>
      <tags>
        <tag>å·¥å…·ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†è§£applyMiddlewareå’ŒcreateStoreä¹‹é—´çš„å…³ç³»]]></title>
    <url>%2F2017%2F08%2F01%2F%E7%90%86%E8%A7%A3redux%E4%B8%AD%E7%9A%84applyMiddleware%E4%B8%8E%E4%B8%AD%E9%97%B4%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä¸å¾—ä¸ä½©æœreduxçš„ä½œè€…Dan Abramovï¼Œçœ‹å®ŒapplyMiddlewareçš„æºç ,æˆ‘çš„æ„Ÿå—å°±æ˜¯ï¼šè¿˜æœ‰è¿™ç§æ“ä½œï¼Ÿä¸å…¶è¯´æ˜¯ç†è§£applyMiddlewareï¼Œä¸å¦‚è¯´æ˜¯ç†æ¸…createStoreï¼ŒapplyMiddlewareå’Œä¸€äº›ä¸­é—´ä»¶çš„å…³ç³»ï¼Œå’Œä¸ºä»€ä¹ˆä¸­é—´ä»¶éƒ½æ˜¯export const createThunkMiddleware = ({ dispatch, getState }) =&gt; next =&gt; action =&gt; {...}ä¸‰å±‚åµŒå¥—å…³ç³»ã€‚ export default function applyMiddleware() { for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key &lt; _len; _key++) { middlewares[_key] = arguments[_key]; } return function (createStore) { return function (reducer, preloadedState, enhancer) { var store = createStore(reducer, preloadedState, enhancer); var _dispatch = store.dispatch; var chain = []; var middlewareAPI = { getState: store.getState, dispatch: function dispatch(action) { return _dispatch(action); } }; chain = middlewares.map(function (middleware) { return middleware(middlewareAPI); }); _dispatch = compose.apply(undefined, chain)(store.dispatch); return _extends({}, store, { dispatch: _dispatch }); }; }; } ç²¾ç®€çš„30è¡Œä»£ç ï¼Œè®¾è®¡æ€æƒ³å¼ºæ— æ•Œã€‚ä¸éš¾çœ‹å‡ºapplyMiddlewareè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªcreateStoreå‡½æ•°è¿”å›ä¸€ä¸ªæ¥æ”¶å‚æ•°å’ŒcreateStoreä¸€æ ·çš„å‡½æ•°ã€‚å¦‚ä¸‹å›¾æ˜¯createStoreçš„éƒ¨åˆ†æºç ï¼šenhancerå°±æ˜¯applyMiddlewareæ‰§è¡Œå®Œç¬¬ä¸€å±‚åçš„å‡½æ•°ï¼Œä¼ ä¸€ä¸ªcreateStoreå‡½æ•°ï¼Œå†æ¬¡è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ­¤æ—¶åªä¼ å¤–å±‚çš„reducerå’ŒpreloadedStateï¼Œå´æ²¡åœ¨ä¼ ç¬¬ä¸‰ä¸ªenhancerå‚æ•°ã€‚è¿™é‡Œè¦çœ‹å›åˆ°applyMiddlewareå‡½æ•°ä¸¤å±‚å½¢å‚å¯¹åº”ä¸Šé¢çš„å®å‚ï¼Œå¯ä»¥çœ‹åˆ°applyMiddlewareå†…éƒ¨è¿˜è°ƒç”¨äº†createStoreï¼Œæ•´ä¸ªä¸€ä¸ªå®Œæ•´çš„é€»è¾‘å¦‚ä¸‹ï¼ˆéƒ¨åˆ†é‡è¦ä»£ç ï¼‰ï¼š é¦–å…ˆæ˜¯è°ƒç”¨createStoreï¼Œè¿™ä¸ªenhancerå…¶å®å°±æ˜¯applyMiddleware(middleware1, middleware2)ã€‚ const store = createStore( reducer, undefined, enhancer ) å…¶æ¬¡æ˜¯createStoreé‡Œåˆ¤æ–­æ‰§è¡Œenhancerï¼Œå¦‚æœä¼ äº†enhancerï¼Œé‚£å°±å¯¹enhanceræ‰§è¡Œå†æ‰§è¡Œï¼Œä¸”ç¬¬äºŒæ¬¡æ‰§è¡Œä¸ä¼ enhancerï¼Œè¿™é‡Œreturnçš„å…¶å®ä¹Ÿæ˜¯applyMiddlewareå‡½æ•°çš„è¿”å›å€¼ï¼Œä½†æ˜¯ç­‰ä¸‹åœ¨applyMiddlewareé‡Œè¿˜ä¼šåœ¨æ‰§è¡Œä¸€æ¬¡createStoreã€‚ if (typeof enhancer !== 'undefined') { if (typeof enhancer !== 'function') { throw new Error('Expected the enhancer to be a function.'); } return enhancer(createStore)(reducer, preloadedState); } æœ€åæ˜¯applyMiddlewareé‡Œçš„ï¼Œç”±äºcreateStoreä¸Šé¢æœ€åä¸€æ¬¡æ‰§è¡Œæœªä¼ enhancerï¼Œæ‰€ä»¥applyMiddlewareé‡Œçš„createStoreæ˜¯ä¸ä¼šå†æ¬¡æ‰§è¡Œenhancer,ä¸ç„¶å°±æ­»å¾ªç¯äº†ã€‚æ‹¿åˆ°è¿”å›çš„sotreå¯¹è±¡ï¼Œé‡æ–°æ”¹é€ dispatchå¹¶è¿”å›ï¼Œè¿™å°±æ˜¯ä¸­é—´ä»¶çš„å®ç°çš„ä¸€ä¸ªå¤§ä½“æµç¨‹ã€‚ return function (createStore) { return function (reducer, preloadedState, enhancer) { var store = createStore(reducer, preloadedState, enhancer); //çœç•¥ä¸€ä¸‡è¡Œ } } è‡³æ­¤ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿå·®ä¸å¤šç†è§£äº†createStoreå’ŒapplyMiddlewareç›¸äº’ä¹‹é—´çš„å…³ç³»äº†ï¼Œå…¶å®å…³äºä¸­é—´ä»¶ä¸ºä»€ä¹ˆåµŒå¥—ä¸‰å±‚çš„é—®é¢˜ä¹Ÿè‡ªç„¶è€Œç„¶çš„è§£å¼€äº†ï¼Œä¸€å¼ å›¾ç‰‡æ¥è¯´æ˜å§ã€‚ èœé¸Ÿå­¦ä¹ ç¬”è®°ï¼Œå¦‚æœ‰ä¸å¯¹ï¼Œè¿˜å¸Œæœ›é«˜æ‰‹æŒ‡ç‚¹ã€‚å¦‚æœ‰é€ æˆè¯¯è§£ï¼Œè¿˜å¸Œæœ›å¤šå¤šè°…è§£ã€‚è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚]]></content>
      <categories>
        <category>react</category>
        <category>redux</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
</search>
